[
    {
        "id": "e9891387af72915b",
        "type": "tab",
        "label": "SENSORES Y ACTUADORES",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "f817f6a7671b1a08",
        "type": "tab",
        "label": "Keyrock",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "7054fec8bee5107d",
        "type": "tab",
        "label": "Orion",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "92d8fd98132b13ea",
        "type": "tab",
        "label": "IoT Agent",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "66697df425b4ad85",
        "type": "tab",
        "label": "APP",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "a802ef2933ec375e",
        "type": "mqtt-broker",
        "name": "Hive MQ",
        "broker": "10.0.2.15",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "80e9a69f51797b3e",
        "type": "mqtt-broker",
        "name": "Hive MQ (Usuario y Contrase√±a)",
        "broker": "10.0.2.15",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "a5e11d29c103c79c",
        "type": "tls-config",
        "name": "",
        "cert": "",
        "key": "",
        "ca": "",
        "certname": "10.0.2.15.crt",
        "keyname": "10.0.2.15.key",
        "caname": "rootCA.key",
        "servername": "",
        "verifyservercert": false,
        "alpnprotocol": ""
    },
    {
        "id": "405695e50f5ae861",
        "type": "mqtt-broker",
        "name": "Hive MQ (SSL/TLS)",
        "broker": "192.168.42.50",
        "port": "8883",
        "tls": "a5e11d29c103c79c",
        "clientid": "",
        "autoConnect": true,
        "usetls": true,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "9df126bc4f38bf1b",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "a248de7ade6e2f2d",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "95bc0ee9d93efab4",
        "type": "ui_group",
        "name": "HomePage",
        "tab": "9df126bc4f38bf1b",
        "order": 1,
        "disp": true,
        "width": "16",
        "collapse": false,
        "className": ""
    },
    {
        "id": "9dbb33cab06f6fad",
        "type": "inject",
        "z": "e9891387af72915b",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "sco",
        "payload": "{\"o\":1}",
        "payloadType": "str",
        "x": 240,
        "y": 180,
        "wires": [
            [
                "f9c12d53aa58f654"
            ]
        ]
    },
    {
        "id": "f9c12d53aa58f654",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 480,
        "y": 180,
        "wires": []
    },
    {
        "id": "4f2e4c354c90d2b4",
        "type": "mqtt in",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "ventilacion/calidad",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "405695e50f5ae861",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1130,
        "y": 1560,
        "wires": [
            [
                "e61fa2f5825d83d2",
                "ed3de45ee09cbe4e"
            ]
        ]
    },
    {
        "id": "e61fa2f5825d83d2",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "recevied data from Hive MQ (SSL/TLS)",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 1500,
        "wires": []
    },
    {
        "id": "54c59a41384deb2f",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 920,
        "y": 1560,
        "wires": []
    },
    {
        "id": "aec29c4ea58a4058",
        "type": "function",
        "z": "e9891387af72915b",
        "name": "function 1",
        "func": "\nconst r = Math.random() * 100;\nlet value = msg.calidad_aire ?? 95\nif(value < 70) {\n    value = 95\n}\nif (r <=20 && value > 65) {\n    value -= 1\n} else if (r >= 80 && value < 100) {\n    value += 1\n}\nmsg.payload = {\"quality\": value}\nmsg.calidad_aire = value\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 1560,
        "wires": [
            [
                "54c59a41384deb2f",
                "309ad082a26a3dc7"
            ]
        ]
    },
    {
        "id": "de3a9f18e4cb9a2a",
        "type": "inject",
        "z": "e9891387af72915b",
        "name": "flow variables",
        "props": [
            {
                "p": "iota_ip",
                "v": "192.168.42.10",
                "vt": "str"
            },
            {
                "p": "iota_puerto_gestion",
                "v": "4061",
                "vt": "str"
            },
            {
                "p": "iota_puerto_datos",
                "v": "7896",
                "vt": "str"
            },
            {
                "p": "fiware_service",
                "v": "sco",
                "vt": "str"
            },
            {
                "p": "fiware_servicepath",
                "v": "/",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 510,
        "y": 420,
        "wires": [
            [
                "c6ec2cdea656ea3b"
            ]
        ]
    },
    {
        "id": "c6ec2cdea656ea3b",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "iota_ip",
                "pt": "flow",
                "to": "iota_ip",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "iota_puerto_gestion",
                "pt": "flow",
                "to": "iota_puerto_gestion",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "iota_puerto_datos",
                "pt": "flow",
                "to": "iota_puerto_datos",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "flow",
                "to": "fiware_service",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "flow",
                "to": "fiware_servicepath",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "ed3de45ee09cbe4e",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "msg",
                "to": "fiware_service",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "msg",
                "to": "fiware_servicepath",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "iota_ip",
                "pt": "msg",
                "to": "iota_ip",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "iota_puerto_datos",
                "pt": "msg",
                "to": "iota_puerto_datos",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "api_key",
                "pt": "msg",
                "to": "1234567890",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "vc001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 1560,
        "wires": [
            [
                "eb66f4247665c72b"
            ]
        ]
    },
    {
        "id": "eb66f4247665c72b",
        "type": "http request",
        "z": "e9891387af72915b",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{iota_ip}}}:{{{iota_puerto_datos}}}/iot/json?k={{{api_key}}}&i={{{device_id}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 1550,
        "y": 1560,
        "wires": [
            [
                "003dec97bb626d6e"
            ]
        ]
    },
    {
        "id": "7cb1f0e17ed702a4",
        "type": "json",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1850,
        "y": 1580,
        "wires": [
            [
                "67516e659d6af62f"
            ]
        ]
    },
    {
        "id": "67516e659d6af62f",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "update devices",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2040,
        "y": 1560,
        "wires": []
    },
    {
        "id": "003dec97bb626d6e",
        "type": "switch",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1710,
        "y": 1560,
        "wires": [
            [
                "67516e659d6af62f"
            ],
            [
                "7cb1f0e17ed702a4"
            ]
        ]
    },
    {
        "id": "c26cf72ba7ea3cd8",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "ACTUADORES",
        "info": "",
        "x": 500,
        "y": 560,
        "wires": []
    },
    {
        "id": "c6f261cdc1aaab2d",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "Get Ventilador Value",
        "info": "",
        "x": 510,
        "y": 620,
        "wires": []
    },
    {
        "id": "3d166ad6a0baed6d",
        "type": "http request",
        "z": "e9891387af72915b",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 750,
        "y": 660,
        "wires": [
            [
                "21d4cf663b0ba120"
            ]
        ]
    },
    {
        "id": "21d4cf663b0ba120",
        "type": "json",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 930,
        "y": 660,
        "wires": [
            [
                "2b556029e5e70aa2"
            ]
        ]
    },
    {
        "id": "a68d54f319a48fbc",
        "type": "inject",
        "z": "e9891387af72915b",
        "name": "flow variables",
        "props": [
            {
                "p": "orion_ip",
                "v": "192.168.41.20",
                "vt": "str"
            },
            {
                "p": "orion_puerto",
                "v": "1026",
                "vt": "str"
            },
            {
                "p": "fiware_service",
                "v": "sco",
                "vt": "str"
            },
            {
                "p": "fiware_servicepath",
                "v": "/",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 510,
        "y": 480,
        "wires": [
            [
                "d35503254f9cfbbd"
            ]
        ]
    },
    {
        "id": "d35503254f9cfbbd",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orion_ip",
                "pt": "flow",
                "to": "orion_ip",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion_puerto",
                "pt": "flow",
                "to": "orion_puerto",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "flow",
                "to": "fiware_service",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "flow",
                "to": "fiware_servicepath",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "9c590dd38934232d",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 1360,
        "y": 660,
        "wires": []
    },
    {
        "id": "0445fc7ee1ce32f8",
        "type": "mqtt in",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "ventilacion/ventilador",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "405695e50f5ae861",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1590,
        "y": 660,
        "wires": [
            [
                "e58937583f29cf3e"
            ]
        ]
    },
    {
        "id": "2b556029e5e70aa2",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "ventilacion/ventilador",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 660,
        "wires": [
            [
                "9c590dd38934232d"
            ]
        ]
    },
    {
        "id": "e58937583f29cf3e",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "debug 3",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1840,
        "y": 660,
        "wires": []
    },
    {
        "id": "795894b1ed9d887d",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "SENSORES",
        "info": "",
        "x": 530,
        "y": 1460,
        "wires": []
    },
    {
        "id": "467a12e2553d6a31",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "Get Molino  Value",
        "info": "",
        "x": 500,
        "y": 740,
        "wires": []
    },
    {
        "id": "b0ca9a4b96193de7",
        "type": "http request",
        "z": "e9891387af72915b",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 750,
        "y": 780,
        "wires": [
            [
                "bed907ceb34a25b5"
            ]
        ]
    },
    {
        "id": "bed907ceb34a25b5",
        "type": "json",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 930,
        "y": 780,
        "wires": [
            [
                "9463bf0ce5ee8aaf"
            ]
        ]
    },
    {
        "id": "ffd72757e6e26215",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 1360,
        "y": 780,
        "wires": []
    },
    {
        "id": "86b4e09808f0a2d2",
        "type": "mqtt in",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "electricidad/molino",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "405695e50f5ae861",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1590,
        "y": 780,
        "wires": [
            [
                "a881ccb1e93ee783"
            ]
        ]
    },
    {
        "id": "9463bf0ce5ee8aaf",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "electricidad/molino",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 780,
        "wires": [
            [
                "ffd72757e6e26215"
            ]
        ]
    },
    {
        "id": "a881ccb1e93ee783",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "debug 5",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1840,
        "y": 780,
        "wires": []
    },
    {
        "id": "f7c0378a1f8e0ca8",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "Get Bateria Activated  Value",
        "info": "",
        "x": 540,
        "y": 860,
        "wires": []
    },
    {
        "id": "aee7e0c9640a795a",
        "type": "http request",
        "z": "e9891387af72915b",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 750,
        "y": 900,
        "wires": [
            [
                "a8d0fe9cd42c5291"
            ]
        ]
    },
    {
        "id": "a8d0fe9cd42c5291",
        "type": "json",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 930,
        "y": 900,
        "wires": [
            [
                "ed133a879d569d09"
            ]
        ]
    },
    {
        "id": "4ad8c127c5f5e365",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 1360,
        "y": 900,
        "wires": []
    },
    {
        "id": "0f3650a0799d972c",
        "type": "mqtt in",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "electricidad/bateria",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "405695e50f5ae861",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1590,
        "y": 900,
        "wires": [
            [
                "93c074dbfb72a642"
            ]
        ]
    },
    {
        "id": "ed133a879d569d09",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "electricidad/bateria",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 900,
        "wires": [
            [
                "4ad8c127c5f5e365"
            ]
        ]
    },
    {
        "id": "93c074dbfb72a642",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "debug 6",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1840,
        "y": 900,
        "wires": []
    },
    {
        "id": "089e1e44bbb2bc06",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "Get EPuerta Locked  Value",
        "info": "",
        "x": 530,
        "y": 1000,
        "wires": []
    },
    {
        "id": "e83c5a446c25b99e",
        "type": "http request",
        "z": "e9891387af72915b",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 750,
        "y": 1040,
        "wires": [
            [
                "9030ffd46c783b80"
            ]
        ]
    },
    {
        "id": "9030ffd46c783b80",
        "type": "json",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 930,
        "y": 1040,
        "wires": [
            [
                "cb57718237f8cf14"
            ]
        ]
    },
    {
        "id": "55d48b120dbb5f89",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 1360,
        "y": 1040,
        "wires": []
    },
    {
        "id": "c0990b9b4f38e8d8",
        "type": "mqtt in",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "aislamiento/epuerta",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "405695e50f5ae861",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1590,
        "y": 1040,
        "wires": [
            [
                "cc8407d6ee5f06dd"
            ]
        ]
    },
    {
        "id": "cb57718237f8cf14",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "aislamiento/epuerta",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 1040,
        "wires": [
            [
                "55d48b120dbb5f89"
            ]
        ]
    },
    {
        "id": "cc8407d6ee5f06dd",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "debug 7",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1840,
        "y": 1040,
        "wires": []
    },
    {
        "id": "7359e1f518c2b08f",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "Get IPuerta Locked  Value",
        "info": "",
        "x": 530,
        "y": 1140,
        "wires": []
    },
    {
        "id": "bea3c848e428a59a",
        "type": "http request",
        "z": "e9891387af72915b",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 750,
        "y": 1180,
        "wires": [
            [
                "62e93be744283466"
            ]
        ]
    },
    {
        "id": "62e93be744283466",
        "type": "json",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 930,
        "y": 1180,
        "wires": [
            [
                "cd7418f962852c4d"
            ]
        ]
    },
    {
        "id": "fd2d5fd4f7de30dd",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 1360,
        "y": 1180,
        "wires": []
    },
    {
        "id": "31c00662b84bc45a",
        "type": "mqtt in",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "aislamiento/ipuerta",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "405695e50f5ae861",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1590,
        "y": 1180,
        "wires": [
            [
                "219dcc8913c171a2"
            ]
        ]
    },
    {
        "id": "cd7418f962852c4d",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "aislamiento/ipuerta",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 1180,
        "wires": [
            [
                "fd2d5fd4f7de30dd"
            ]
        ]
    },
    {
        "id": "219dcc8913c171a2",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "debug 8",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1840,
        "y": 1180,
        "wires": []
    },
    {
        "id": "8d301a249795d2a9",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "Get Hidraulico Compuertas  Value",
        "info": "",
        "x": 550,
        "y": 1260,
        "wires": []
    },
    {
        "id": "28481ea6c3fae147",
        "type": "http request",
        "z": "e9891387af72915b",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 750,
        "y": 1300,
        "wires": [
            [
                "1489da6934cc7a46"
            ]
        ]
    },
    {
        "id": "1489da6934cc7a46",
        "type": "json",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 930,
        "y": 1300,
        "wires": [
            [
                "afd09a685cacf560"
            ]
        ]
    },
    {
        "id": "380fa2519e8f6231",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 1360,
        "y": 1300,
        "wires": []
    },
    {
        "id": "2e6a16eab3cc3fd6",
        "type": "mqtt in",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "hidraulico/compuertas",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "405695e50f5ae861",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1590,
        "y": 1300,
        "wires": [
            [
                "9ed418945207860b"
            ]
        ]
    },
    {
        "id": "afd09a685cacf560",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "hidraulico/compuertas",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 1300,
        "wires": [
            [
                "380fa2519e8f6231"
            ]
        ]
    },
    {
        "id": "9ed418945207860b",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "debug 9",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1840,
        "y": 1300,
        "wires": []
    },
    {
        "id": "309ad082a26a3dc7",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "calidad_aire",
                "pt": "flow",
                "to": "calidad_aire",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 1640,
        "wires": [
            [
                "c6a482ffef5c2df8"
            ]
        ]
    },
    {
        "id": "c6a482ffef5c2df8",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "debug 1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1120,
        "y": 1640,
        "wires": []
    },
    {
        "id": "d278e01001b97fad",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "Set Calidad Aire Value",
        "info": "",
        "x": 560,
        "y": 1520,
        "wires": []
    },
    {
        "id": "c01730705b5a303a",
        "type": "mqtt in",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "electricidad/tbateria",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "405695e50f5ae861",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1130,
        "y": 1800,
        "wires": [
            [
                "9b8c683eea13e0fa",
                "3b1a6f240059b429"
            ]
        ]
    },
    {
        "id": "9b8c683eea13e0fa",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "recevied data from Hive MQ (SSL/TLS)",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 1740,
        "wires": []
    },
    {
        "id": "e3dd98642a7b1ac3",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 920,
        "y": 1800,
        "wires": []
    },
    {
        "id": "81f33317742dbdc2",
        "type": "function",
        "z": "e9891387af72915b",
        "name": "function 2",
        "func": "\nconst r = Math.random() * 100;\nlet value = msg.temp_bateria ?? 25\nif(value > 50 || value < 5) {\n    value = 25\n}\nif (r <=10 && value > 0) {\n    value -= 1\n} else if (r >= 90 && value < 100) {\n    value += 1\n}\nmsg.payload = {\"temp\": value}\nmsg.temp_bateria = value\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 1800,
        "wires": [
            [
                "e3dd98642a7b1ac3",
                "b5282cbeddd4da32"
            ]
        ]
    },
    {
        "id": "3b1a6f240059b429",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "msg",
                "to": "fiware_service",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "msg",
                "to": "fiware_servicepath",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "iota_ip",
                "pt": "msg",
                "to": "iota_ip",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "iota_puerto_datos",
                "pt": "msg",
                "to": "iota_puerto_datos",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "api_key",
                "pt": "msg",
                "to": "1234567890",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "et001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 1800,
        "wires": [
            [
                "32c1ca88841cd107"
            ]
        ]
    },
    {
        "id": "32c1ca88841cd107",
        "type": "http request",
        "z": "e9891387af72915b",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{iota_ip}}}:{{{iota_puerto_datos}}}/iot/json?k={{{api_key}}}&i={{{device_id}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 1550,
        "y": 1800,
        "wires": [
            [
                "7730349ce1930f07"
            ]
        ]
    },
    {
        "id": "f91b7c3b207ec0f9",
        "type": "json",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1850,
        "y": 1820,
        "wires": [
            [
                "58714a212f4b67d6"
            ]
        ]
    },
    {
        "id": "58714a212f4b67d6",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "update devices",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2040,
        "y": 1800,
        "wires": []
    },
    {
        "id": "7730349ce1930f07",
        "type": "switch",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1710,
        "y": 1800,
        "wires": [
            [
                "58714a212f4b67d6"
            ],
            [
                "f91b7c3b207ec0f9"
            ]
        ]
    },
    {
        "id": "b5282cbeddd4da32",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp_bateria",
                "pt": "flow",
                "to": "temp_bateria",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 1880,
        "wires": [
            [
                "17644e59ad807d94"
            ]
        ]
    },
    {
        "id": "17644e59ad807d94",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "debug 12",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1080,
        "y": 1880,
        "wires": []
    },
    {
        "id": "fdbb68f6e8067879",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "Set Temperatura Bateria Value",
        "info": "",
        "x": 580,
        "y": 1760,
        "wires": []
    },
    {
        "id": "f7e73366ab3bec1a",
        "type": "mqtt in",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "electricidad/viento",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "405695e50f5ae861",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1130,
        "y": 2040,
        "wires": [
            [
                "254049d49ee1e06b",
                "c44145badfdd9d5b"
            ]
        ]
    },
    {
        "id": "254049d49ee1e06b",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "recevied data from Hive MQ (SSL/TLS)",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 1980,
        "wires": []
    },
    {
        "id": "c717c2c2a952accb",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 920,
        "y": 2040,
        "wires": []
    },
    {
        "id": "73a0f616d1b9a9d9",
        "type": "function",
        "z": "e9891387af72915b",
        "name": "function 3",
        "func": "\nconst r = Math.random() * 100;\nlet value = msg.velocidad_viento ?? 40\nif(value > 100 || value < 5) {\n    value = 40\n}\nif (r <= 30 && value > 65) {\n    value -= 1\n} else if (r >= 90 && value < 100) {\n    value += 1\n}\nmsg.payload = {\"speed\": value}\nmsg.velocidad_viento = value\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 2040,
        "wires": [
            [
                "c717c2c2a952accb",
                "aea0ed4217d2ae56"
            ]
        ]
    },
    {
        "id": "c44145badfdd9d5b",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "msg",
                "to": "fiware_service",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "msg",
                "to": "fiware_servicepath",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "iota_ip",
                "pt": "msg",
                "to": "iota_ip",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "iota_puerto_datos",
                "pt": "msg",
                "to": "iota_puerto_datos",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "api_key",
                "pt": "msg",
                "to": "1234567890",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "ev001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 2040,
        "wires": [
            [
                "1a2bd4a1abfdc495"
            ]
        ]
    },
    {
        "id": "1a2bd4a1abfdc495",
        "type": "http request",
        "z": "e9891387af72915b",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{iota_ip}}}:{{{iota_puerto_datos}}}/iot/json?k={{{api_key}}}&i={{{device_id}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 1550,
        "y": 2040,
        "wires": [
            [
                "0023156a988f15b1"
            ]
        ]
    },
    {
        "id": "316e3d3d90203958",
        "type": "json",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1850,
        "y": 2060,
        "wires": [
            [
                "ac2a8388b98ad589"
            ]
        ]
    },
    {
        "id": "ac2a8388b98ad589",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "update devices",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2040,
        "y": 2040,
        "wires": []
    },
    {
        "id": "0023156a988f15b1",
        "type": "switch",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1710,
        "y": 2040,
        "wires": [
            [
                "ac2a8388b98ad589"
            ],
            [
                "316e3d3d90203958"
            ]
        ]
    },
    {
        "id": "aea0ed4217d2ae56",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "velocidad_viento",
                "pt": "flow",
                "to": "velocidad_viento",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 2120,
        "wires": [
            [
                "5c3bc1636077e0f3"
            ]
        ]
    },
    {
        "id": "5c3bc1636077e0f3",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "debug 13",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1120,
        "y": 2120,
        "wires": []
    },
    {
        "id": "fe27f8344f808535",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "Set Velocidad Viento Value",
        "info": "",
        "x": 570,
        "y": 2000,
        "wires": []
    },
    {
        "id": "89a54746b4346501",
        "type": "inject",
        "z": "e9891387af72915b",
        "name": "flow variables",
        "props": [
            {
                "p": "calidad_aire",
                "v": "95",
                "vt": "num"
            },
            {
                "p": "temp_bateria",
                "v": "25",
                "vt": "num"
            },
            {
                "p": "velocidad_viento",
                "v": "40",
                "vt": "num"
            },
            {
                "p": "calidad_agua",
                "v": "95",
                "vt": "num"
            },
            {
                "p": "capacidad_tanque",
                "v": "40",
                "vt": "num"
            },
            {
                "p": "alarm_state",
                "v": "false",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 750,
        "y": 1460,
        "wires": [
            [
                "594c440edad985ae"
            ]
        ]
    },
    {
        "id": "594c440edad985ae",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "calidad_aire",
                "pt": "flow",
                "to": "calidad_aire",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "calidad_agua",
                "pt": "flow",
                "to": "calidad_agua",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "velocidad_viento",
                "pt": "flow",
                "to": "velocidad_viento",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "capacidad_tanque",
                "pt": "flow",
                "to": "capacidad_tanque",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "alarm_state",
                "pt": "flow",
                "to": "alarm_state",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 1460,
        "wires": [
            []
        ]
    },
    {
        "id": "cfd66b0b51f09e7a",
        "type": "mqtt in",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "hidraulico/calidad",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "405695e50f5ae861",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1110,
        "y": 2260,
        "wires": [
            [
                "e035ef7978404ba3",
                "c56d8640c1030a5d"
            ]
        ]
    },
    {
        "id": "e035ef7978404ba3",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "recevied data from Hive MQ (SSL/TLS)",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1410,
        "y": 2200,
        "wires": []
    },
    {
        "id": "e0e8654b97f5fd8c",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 900,
        "y": 2260,
        "wires": []
    },
    {
        "id": "1ebf1a16a725cd13",
        "type": "function",
        "z": "e9891387af72915b",
        "name": "function 11",
        "func": "\nconst r = Math.random() * 100;\nlet value = msg.calidad_agua ?? 95\nif(value < 70) {\n    value = 95\n}\nif (r <=20 && value > 65) {\n    value -= 1\n} else if (r >= 80 && value < 100) {\n    value += 1\n}\nmsg.payload = {\"quality\": value}\nmsg.calidad_agua = value\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 2260,
        "wires": [
            [
                "e0e8654b97f5fd8c",
                "2603faac19078b49"
            ]
        ]
    },
    {
        "id": "c56d8640c1030a5d",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "msg",
                "to": "fiware_service",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "msg",
                "to": "fiware_servicepath",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "iota_ip",
                "pt": "msg",
                "to": "iota_ip",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "iota_puerto_datos",
                "pt": "msg",
                "to": "iota_puerto_datos",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "api_key",
                "pt": "msg",
                "to": "1234567890",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "hca001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1340,
        "y": 2260,
        "wires": [
            [
                "24d3d9f378202cc3"
            ]
        ]
    },
    {
        "id": "24d3d9f378202cc3",
        "type": "http request",
        "z": "e9891387af72915b",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{iota_ip}}}:{{{iota_puerto_datos}}}/iot/json?k={{{api_key}}}&i={{{device_id}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 1530,
        "y": 2260,
        "wires": [
            [
                "7dc22ec80342ab54"
            ]
        ]
    },
    {
        "id": "c8cdd5d8a6de5bf2",
        "type": "json",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1830,
        "y": 2280,
        "wires": [
            [
                "7ec1f9dc26e7ce02"
            ]
        ]
    },
    {
        "id": "7ec1f9dc26e7ce02",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "update devices",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2020,
        "y": 2260,
        "wires": []
    },
    {
        "id": "7dc22ec80342ab54",
        "type": "switch",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1690,
        "y": 2260,
        "wires": [
            [
                "7ec1f9dc26e7ce02"
            ],
            [
                "c8cdd5d8a6de5bf2"
            ]
        ]
    },
    {
        "id": "2603faac19078b49",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "calidad_agua",
                "pt": "flow",
                "to": "calidad_agua",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 2340,
        "wires": [
            [
                "818962fecc0d5b9d"
            ]
        ]
    },
    {
        "id": "818962fecc0d5b9d",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "debug 14",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1100,
        "y": 2340,
        "wires": []
    },
    {
        "id": "9310d5c22349692b",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "Set Calidad Agua",
        "info": "",
        "x": 520,
        "y": 2220,
        "wires": []
    },
    {
        "id": "f81e128b5e3ec694",
        "type": "mqtt in",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "hidraulico/capacidad",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "405695e50f5ae861",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1130,
        "y": 2460,
        "wires": [
            [
                "d63e494e14c76e8a",
                "404a51720254a808"
            ]
        ]
    },
    {
        "id": "d63e494e14c76e8a",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "recevied data from Hive MQ (SSL/TLS)",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 2400,
        "wires": []
    },
    {
        "id": "54be4f316bf02718",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 920,
        "y": 2460,
        "wires": []
    },
    {
        "id": "99604eba2450621f",
        "type": "function",
        "z": "e9891387af72915b",
        "name": "function 12",
        "func": "\nconst r = Math.random() * 100;\nlet value = msg.capacidad_tanque ?? 40\nif(value > 100 || value < 5) {\n    value = 40\n}\nif (r <= 30 && value > 0) {\n    value -= 1\n} else if (r >= 90 && value < 100) {\n    value += 1\n}\nmsg.payload = {\"capacity\": value}\nmsg.capacidad_tanque = value\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 2460,
        "wires": [
            [
                "54be4f316bf02718",
                "c373f9010eac2c3f"
            ]
        ]
    },
    {
        "id": "404a51720254a808",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "msg",
                "to": "fiware_service",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "msg",
                "to": "fiware_servicepath",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "iota_ip",
                "pt": "msg",
                "to": "iota_ip",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "iota_puerto_datos",
                "pt": "msg",
                "to": "iota_puerto_datos",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "api_key",
                "pt": "msg",
                "to": "1234567890",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "hct001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 2460,
        "wires": [
            [
                "1292b2f9f06996b1"
            ]
        ]
    },
    {
        "id": "1292b2f9f06996b1",
        "type": "http request",
        "z": "e9891387af72915b",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{iota_ip}}}:{{{iota_puerto_datos}}}/iot/json?k={{{api_key}}}&i={{{device_id}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 1550,
        "y": 2460,
        "wires": [
            [
                "b7b782d98aae69e2"
            ]
        ]
    },
    {
        "id": "87498f49ff16da85",
        "type": "json",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1850,
        "y": 2480,
        "wires": [
            [
                "493943f8ec1875cf"
            ]
        ]
    },
    {
        "id": "493943f8ec1875cf",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "update devices",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2040,
        "y": 2460,
        "wires": []
    },
    {
        "id": "b7b782d98aae69e2",
        "type": "switch",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1710,
        "y": 2460,
        "wires": [
            [
                "493943f8ec1875cf"
            ],
            [
                "87498f49ff16da85"
            ]
        ]
    },
    {
        "id": "c373f9010eac2c3f",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "capacidad_tanque",
                "pt": "flow",
                "to": "capacidad_tanque",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 2540,
        "wires": [
            [
                "0bc32681fbef6e30"
            ]
        ]
    },
    {
        "id": "0bc32681fbef6e30",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "debug 15",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1120,
        "y": 2540,
        "wires": []
    },
    {
        "id": "fa335cdad9909dc1",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "Set Capacidad Tanque",
        "info": "",
        "x": 560,
        "y": 2420,
        "wires": []
    },
    {
        "id": "d37ea71f66621d2f",
        "type": "mqtt in",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "aislamiento/alarma",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "405695e50f5ae861",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1130,
        "y": 2660,
        "wires": [
            [
                "fc16ec7d1961460a",
                "5a19d7a177c6bc81"
            ]
        ]
    },
    {
        "id": "fc16ec7d1961460a",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "recevied data from Hive MQ (SSL/TLS)",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 2600,
        "wires": []
    },
    {
        "id": "ef9ca27c463beb8b",
        "type": "mqtt out",
        "z": "e9891387af72915b",
        "name": "Hive MQ (SSL/TLS)",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "405695e50f5ae861",
        "x": 920,
        "y": 2660,
        "wires": []
    },
    {
        "id": "366027350853f6cd",
        "type": "function",
        "z": "e9891387af72915b",
        "name": "function 15",
        "func": "\nconst r = Math.random() * 1000;\nlet value = msg.alarm_state ?? false\nvalue = r > 995\nmsg.payload = {\"alarma\": value}\nmsg.alarm_state = value\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 2660,
        "wires": [
            [
                "ef9ca27c463beb8b",
                "bff32c44c74d6e0d"
            ]
        ]
    },
    {
        "id": "5a19d7a177c6bc81",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "msg",
                "to": "fiware_service",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "msg",
                "to": "fiware_servicepath",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "iota_ip",
                "pt": "msg",
                "to": "iota_ip",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "iota_puerto_datos",
                "pt": "msg",
                "to": "iota_puerto_datos",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "api_key",
                "pt": "msg",
                "to": "1234567890",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "as001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 2660,
        "wires": [
            [
                "9a7e30f86be0fe96"
            ]
        ]
    },
    {
        "id": "9a7e30f86be0fe96",
        "type": "http request",
        "z": "e9891387af72915b",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{iota_ip}}}:{{{iota_puerto_datos}}}/iot/json?k={{{api_key}}}&i={{{device_id}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 1550,
        "y": 2660,
        "wires": [
            [
                "5a983824a425c74b"
            ]
        ]
    },
    {
        "id": "f1b527d325c96fc9",
        "type": "json",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1850,
        "y": 2680,
        "wires": [
            [
                "9111e75c12640c61"
            ]
        ]
    },
    {
        "id": "9111e75c12640c61",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "update devices",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2040,
        "y": 2660,
        "wires": []
    },
    {
        "id": "5a983824a425c74b",
        "type": "switch",
        "z": "e9891387af72915b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1710,
        "y": 2660,
        "wires": [
            [
                "9111e75c12640c61"
            ],
            [
                "f1b527d325c96fc9"
            ]
        ]
    },
    {
        "id": "bff32c44c74d6e0d",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "alarm_state",
                "pt": "flow",
                "to": "alarm_state",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 2740,
        "wires": [
            [
                "a0f1816771d8e6e6"
            ]
        ]
    },
    {
        "id": "a0f1816771d8e6e6",
        "type": "debug",
        "z": "e9891387af72915b",
        "name": "debug 10",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1120,
        "y": 2740,
        "wires": []
    },
    {
        "id": "a29b9901e6c2157f",
        "type": "comment",
        "z": "e9891387af72915b",
        "name": "Set Alarma Incendios",
        "info": "",
        "x": 560,
        "y": 2620,
        "wires": []
    },
    {
        "id": "27c936b60b9b9a7c",
        "type": "inject",
        "z": "e9891387af72915b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 1560,
        "wires": [
            [
                "6c969d528008ea8e",
                "5d38a22f98fc7f2b",
                "cf561b878e90d0e3",
                "a92e0399b43f6d1d",
                "1d4063890445fda8",
                "5c87a28d45b79226"
            ]
        ]
    },
    {
        "id": "cf561b878e90d0e3",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "calidad_aire",
                "pt": "msg",
                "to": "calidad_aire",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "ventilacion/calidad",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 1560,
        "wires": [
            [
                "aec29c4ea58a4058"
            ]
        ]
    },
    {
        "id": "5d38a22f98fc7f2b",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp_bateria",
                "pt": "msg",
                "to": "temp_bateria",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "electricidad/tbateria",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 1800,
        "wires": [
            [
                "81f33317742dbdc2"
            ]
        ]
    },
    {
        "id": "6c969d528008ea8e",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "velocidad_viento",
                "pt": "msg",
                "to": "velocidad_viento",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "electricidad/viento",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 2040,
        "wires": [
            [
                "73a0f616d1b9a9d9"
            ]
        ]
    },
    {
        "id": "a92e0399b43f6d1d",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "calidad_agua",
                "pt": "msg",
                "to": "calidad_agua",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "hidraulico/calidad",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 2260,
        "wires": [
            [
                "1ebf1a16a725cd13"
            ]
        ]
    },
    {
        "id": "1d4063890445fda8",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "capacidad_tanque",
                "pt": "msg",
                "to": "capacidad_tanque",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "hidraulico/capacidad",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 2460,
        "wires": [
            [
                "99604eba2450621f"
            ]
        ]
    },
    {
        "id": "5c87a28d45b79226",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "alarm_state",
                "pt": "msg",
                "to": "alarm_state",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "aislamiento/alarma",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 2660,
        "wires": [
            [
                "366027350853f6cd"
            ]
        ]
    },
    {
        "id": "e84d5d3c30ddf3f8",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Ventilador:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 660,
        "wires": [
            [
                "3d166ad6a0baed6d"
            ]
        ]
    },
    {
        "id": "602d835fb7f3d6b6",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Molino:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 780,
        "wires": [
            [
                "b0ca9a4b96193de7"
            ]
        ]
    },
    {
        "id": "968b8545d7342635",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Bateria:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 900,
        "wires": [
            [
                "aee7e0c9640a795a"
            ]
        ]
    },
    {
        "id": "f9ea7ce93240999d",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:EPuerta:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "locked",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 1040,
        "wires": [
            [
                "e83c5a446c25b99e"
            ]
        ]
    },
    {
        "id": "26bcd4247084378e",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:IPuerta:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "locked",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 1180,
        "wires": [
            [
                "bea3c848e428a59a"
            ]
        ]
    },
    {
        "id": "72e6d0376acaabab",
        "type": "change",
        "z": "e9891387af72915b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Compuertas:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "locked",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 1300,
        "wires": [
            [
                "28481ea6c3fae147"
            ]
        ]
    },
    {
        "id": "f8b55ccad178e1dd",
        "type": "inject",
        "z": "e9891387af72915b",
        "name": "execute request",
        "props": [
            {
                "p": "orion_ip",
                "v": "orion_ip",
                "vt": "flow"
            },
            {
                "p": "orion_puerto",
                "v": "orion_puerto",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "oauth2-token",
                "v": "oauth2-token",
                "vt": "global"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 660,
        "wires": [
            [
                "e84d5d3c30ddf3f8",
                "602d835fb7f3d6b6",
                "968b8545d7342635",
                "f9ea7ce93240999d",
                "26bcd4247084378e",
                "72e6d0376acaabab"
            ]
        ]
    },
    {
        "id": "99aebcd78c1fc320",
        "type": "inject",
        "z": "f817f6a7671b1a08",
        "name": "flow variables",
        "props": [
            {
                "p": "keyrock_ip",
                "v": "192.168.40.10",
                "vt": "str"
            },
            {
                "p": "keyrock_puerto",
                "v": "3443",
                "vt": "str"
            },
            {
                "p": "keyrock_oauth2_client_id",
                "v": "d6ef7f8c-7c70-4b59-8e3d-121bcd316d47",
                "vt": "str"
            },
            {
                "p": "keyrock_oauth2_client_secret",
                "v": "79f7a7b3-fe5c-47c5-a3e5-c69592e2a47a",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 190,
        "y": 60,
        "wires": [
            [
                "8404c4b135ff9b53"
            ]
        ]
    },
    {
        "id": "8404c4b135ff9b53",
        "type": "change",
        "z": "f817f6a7671b1a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "keyrock_ip",
                "pt": "flow",
                "to": "keyrock_ip",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "keyrock_puerto",
                "pt": "flow",
                "to": "keyrock_puerto",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "keyrock_oauth2_client_id",
                "pt": "flow",
                "to": "keyrock_oauth2_client_id",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "keyrock_oauth2_client_secret",
                "pt": "flow",
                "to": "keyrock_oauth2_client_secret",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "fadcbbf828cf1cc6",
        "type": "comment",
        "z": "f817f6a7671b1a08",
        "name": "OAuth2 Token",
        "info": "",
        "x": 130,
        "y": 140,
        "wires": []
    },
    {
        "id": "9fa076214d57930e",
        "type": "comment",
        "z": "f817f6a7671b1a08",
        "name": "Get OAuth2 token",
        "info": "",
        "x": 190,
        "y": 180,
        "wires": []
    },
    {
        "id": "659f04d50c1867aa",
        "type": "comment",
        "z": "f817f6a7671b1a08",
        "name": "Get OAuth2 token: admin",
        "info": "",
        "x": 210,
        "y": 220,
        "wires": []
    },
    {
        "id": "ba12e026049f5d61",
        "type": "comment",
        "z": "f817f6a7671b1a08",
        "name": "Get OAuth2 token: admin (permanent)",
        "info": "",
        "x": 250,
        "y": 340,
        "wires": []
    },
    {
        "id": "3f2e59a1bcd6c4d1",
        "type": "inject",
        "z": "f817f6a7671b1a08",
        "name": "execute request",
        "props": [
            {
                "p": "keyrock_ip",
                "v": "keyrock_ip",
                "vt": "flow"
            },
            {
                "p": "keyrock_puerto",
                "v": "keyrock_puerto",
                "vt": "flow"
            },
            {
                "p": "keyrock_oauth2_client_id",
                "v": "keyrock_oauth2_client_id",
                "vt": "flow"
            },
            {
                "p": "keyrock_oauth2_client_secret",
                "v": "keyrock_oauth2_client_secret",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "username=admin@test.com&password=1234567890&grant_type=password",
        "payloadType": "str",
        "x": 200,
        "y": 260,
        "wires": [
            [
                "cf62b1799b4e981f"
            ]
        ]
    },
    {
        "id": "aa5edb83c0162e6d",
        "type": "inject",
        "z": "f817f6a7671b1a08",
        "name": "execute request",
        "props": [
            {
                "p": "keyrock_ip",
                "v": "keyrock_ip",
                "vt": "flow"
            },
            {
                "p": "keyrock_puerto",
                "v": "keyrock_puerto",
                "vt": "flow"
            },
            {
                "p": "keyrock_oauth2_client_id",
                "v": "keyrock_oauth2_client_id",
                "vt": "flow"
            },
            {
                "p": "keyrock_oauth2_client_secret",
                "v": "keyrock_oauth2_client_secret",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "username=admin@test.com&password=1234567890&grant_type=password&scope=permanent",
        "payloadType": "str",
        "x": 200,
        "y": 300,
        "wires": [
            [
                "cf62b1799b4e981f"
            ]
        ]
    },
    {
        "id": "cf62b1799b4e981f",
        "type": "http request",
        "z": "f817f6a7671b1a08",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{keyrock_oauth2_client_id}}}:{{{keyrock_oauth2_client_secret}}}@{{{keyrock_ip}}}:{{{keyrock_puerto}}}/oauth2/token",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/x-www-form-urlencoded"
            }
        ],
        "x": 410,
        "y": 280,
        "wires": [
            [
                "c24d14ef18de6f27"
            ]
        ]
    },
    {
        "id": "c24d14ef18de6f27",
        "type": "json",
        "z": "f817f6a7671b1a08",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 280,
        "wires": [
            [
                "6076f249899ffa4b",
                "cb3fcb269600653a"
            ]
        ]
    },
    {
        "id": "6076f249899ffa4b",
        "type": "debug",
        "z": "f817f6a7671b1a08",
        "name": "get oauth2 token",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 950,
        "y": 280,
        "wires": []
    },
    {
        "id": "cb3fcb269600653a",
        "type": "change",
        "z": "f817f6a7671b1a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "oauth2-token",
                "pt": "global",
                "to": "payload.access_token",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "8478081292e8f75a",
        "type": "inject",
        "z": "7054fec8bee5107d",
        "name": "flow variables",
        "props": [
            {
                "p": "orion_ip",
                "v": "192.168.41.20",
                "vt": "str"
            },
            {
                "p": "orion_puerto",
                "v": "1026",
                "vt": "str"
            },
            {
                "p": "fiware_service",
                "v": "sco",
                "vt": "str"
            },
            {
                "p": "fiware_servicepath",
                "v": "/",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 190,
        "y": 60,
        "wires": [
            [
                "c4ae7c4d8859dada"
            ]
        ]
    },
    {
        "id": "c4ae7c4d8859dada",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orion_ip",
                "pt": "flow",
                "to": "orion_ip",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion_puerto",
                "pt": "flow",
                "to": "orion_puerto",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "flow",
                "to": "fiware_service",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "flow",
                "to": "fiware_servicepath",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "e5f87742103c22f6",
        "type": "inject",
        "z": "7054fec8bee5107d",
        "name": "execute request",
        "props": [
            {
                "p": "orion_ip",
                "v": "orion_ip",
                "vt": "flow"
            },
            {
                "p": "orion_puerto",
                "v": "orion_puerto",
                "vt": "flow"
            },
            {
                "p": "oauth2-token",
                "v": "oauth2-token",
                "vt": "global"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 180,
        "wires": [
            [
                "e62757f60f8d3c2c"
            ]
        ]
    },
    {
        "id": "2e4d60ebdee5e648",
        "type": "json",
        "z": "7054fec8bee5107d",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 180,
        "wires": [
            [
                "32b4139a92f2c460"
            ]
        ]
    },
    {
        "id": "32b4139a92f2c460",
        "type": "debug",
        "z": "7054fec8bee5107d",
        "name": "orion version",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 180,
        "wires": []
    },
    {
        "id": "682ca218903955cf",
        "type": "comment",
        "z": "7054fec8bee5107d",
        "name": "Check orion version",
        "info": "",
        "x": 190,
        "y": 140,
        "wires": []
    },
    {
        "id": "e62757f60f8d3c2c",
        "type": "http request",
        "z": "7054fec8bee5107d",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/version",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 410,
        "y": 180,
        "wires": [
            [
                "2e4d60ebdee5e648",
                "b35a69dcf02647e9"
            ]
        ]
    },
    {
        "id": "76dec3080a64dc12",
        "type": "comment",
        "z": "7054fec8bee5107d",
        "name": "Entities",
        "info": "",
        "x": 150,
        "y": 240,
        "wires": []
    },
    {
        "id": "d21a6f6bcdf470ba",
        "type": "comment",
        "z": "7054fec8bee5107d",
        "name": "Get entities",
        "info": "",
        "x": 170,
        "y": 300,
        "wires": []
    },
    {
        "id": "30be064efcb14deb",
        "type": "inject",
        "z": "7054fec8bee5107d",
        "name": "execute request",
        "props": [
            {
                "p": "orion_ip",
                "v": "orion_ip",
                "vt": "flow"
            },
            {
                "p": "orion_puerto",
                "v": "orion_puerto",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "oauth2-token",
                "v": "oauth2-token",
                "vt": "global"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 340,
        "wires": [
            [
                "1af99b4c98de8c0c"
            ]
        ]
    },
    {
        "id": "1af99b4c98de8c0c",
        "type": "http request",
        "z": "7054fec8bee5107d",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 410,
        "y": 340,
        "wires": [
            [
                "dc85eb069a6a3d69"
            ]
        ]
    },
    {
        "id": "dc85eb069a6a3d69",
        "type": "json",
        "z": "7054fec8bee5107d",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 340,
        "wires": [
            [
                "e75be13027181133"
            ]
        ]
    },
    {
        "id": "e75be13027181133",
        "type": "debug",
        "z": "7054fec8bee5107d",
        "name": "get entities",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 340,
        "wires": []
    },
    {
        "id": "b4a9d1c78508b72f",
        "type": "comment",
        "z": "7054fec8bee5107d",
        "name": "Delete entity",
        "info": "",
        "x": 170,
        "y": 420,
        "wires": []
    },
    {
        "id": "733b944ba9b0bc95",
        "type": "inject",
        "z": "7054fec8bee5107d",
        "name": "execute request",
        "props": [
            {
                "p": "orion_ip",
                "v": "orion_ip",
                "vt": "flow"
            },
            {
                "p": "orion_puerto",
                "v": "orion_puerto",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "entity_id",
                "v": "Thing:vc001",
                "vt": "str"
            },
            {
                "p": "oauth2-token",
                "v": "oauth2-token",
                "vt": "global"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 460,
        "wires": [
            [
                "9b18efd711f33d37"
            ]
        ]
    },
    {
        "id": "9b18efd711f33d37",
        "type": "http request",
        "z": "7054fec8bee5107d",
        "name": "",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 410,
        "y": 460,
        "wires": [
            [
                "8daaa12956f641b6"
            ]
        ]
    },
    {
        "id": "6bdd20aaf07f69c1",
        "type": "json",
        "z": "7054fec8bee5107d",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 500,
        "wires": [
            [
                "6f053ac64b5daac7"
            ]
        ]
    },
    {
        "id": "6f053ac64b5daac7",
        "type": "debug",
        "z": "7054fec8bee5107d",
        "name": "delete entity",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 460,
        "wires": []
    },
    {
        "id": "8daaa12956f641b6",
        "type": "switch",
        "z": "7054fec8bee5107d",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 460,
        "wires": [
            [
                "6f053ac64b5daac7"
            ],
            [
                "6bdd20aaf07f69c1"
            ]
        ]
    },
    {
        "id": "02ea57af251f1453",
        "type": "comment",
        "z": "7054fec8bee5107d",
        "name": "Entity attributes",
        "info": "",
        "x": 140,
        "y": 580,
        "wires": []
    },
    {
        "id": "1d9d726deb905f8d",
        "type": "comment",
        "z": "7054fec8bee5107d",
        "name": "Get entity attribute: all",
        "info": "",
        "x": 200,
        "y": 620,
        "wires": []
    },
    {
        "id": "f41f1ebdd8610bf4",
        "type": "inject",
        "z": "7054fec8bee5107d",
        "name": "execute request",
        "props": [
            {
                "p": "orion_ip",
                "v": "orion_ip",
                "vt": "flow"
            },
            {
                "p": "orion_puerto",
                "v": "orion_puerto",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "entity_id",
                "v": "Thing:lamp002",
                "vt": "str"
            },
            {
                "p": "oauth2-token",
                "v": "oauth2-token",
                "vt": "global"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 660,
        "wires": [
            [
                "9de147ce6994653c"
            ]
        ]
    },
    {
        "id": "9de147ce6994653c",
        "type": "http request",
        "z": "7054fec8bee5107d",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 410,
        "y": 660,
        "wires": [
            [
                "9b42f963c4d62f5d"
            ]
        ]
    },
    {
        "id": "9b42f963c4d62f5d",
        "type": "json",
        "z": "7054fec8bee5107d",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 790,
        "y": 660,
        "wires": [
            [
                "b597fe798f1f88dd"
            ]
        ]
    },
    {
        "id": "b597fe798f1f88dd",
        "type": "debug",
        "z": "7054fec8bee5107d",
        "name": "get entity attribute: all",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1100,
        "y": 660,
        "wires": []
    },
    {
        "id": "4cdb27e29c6be2d8",
        "type": "comment",
        "z": "7054fec8bee5107d",
        "name": "Get entity attribute: on",
        "info": "",
        "x": 200,
        "y": 740,
        "wires": []
    },
    {
        "id": "b61e5a09fce7be13",
        "type": "inject",
        "z": "7054fec8bee5107d",
        "name": "execute request",
        "props": [
            {
                "p": "orion_ip",
                "v": "orion_ip",
                "vt": "flow"
            },
            {
                "p": "orion_puerto",
                "v": "orion_puerto",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "entity_id",
                "v": "urn:ngsi-ld:Lamp:001",
                "vt": "str"
            },
            {
                "p": "attr",
                "v": "on",
                "vt": "str"
            },
            {
                "p": "oauth2-token",
                "v": "oauth2-token",
                "vt": "global"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 780,
        "wires": [
            [
                "af20204629072774"
            ]
        ]
    },
    {
        "id": "287761bfbe953e9a",
        "type": "http request",
        "z": "7054fec8bee5107d",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 610,
        "y": 780,
        "wires": [
            [
                "de6f6f7b709321d4"
            ]
        ]
    },
    {
        "id": "de6f6f7b709321d4",
        "type": "json",
        "z": "7054fec8bee5107d",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 790,
        "y": 780,
        "wires": [
            [
                "0193fa992c255b5d"
            ]
        ]
    },
    {
        "id": "0193fa992c255b5d",
        "type": "debug",
        "z": "7054fec8bee5107d",
        "name": "get entity attribute: on",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1100,
        "y": 780,
        "wires": []
    },
    {
        "id": "af20204629072774",
        "type": "trigger",
        "z": "7054fec8bee5107d",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-1",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 420,
        "y": 780,
        "wires": [
            [
                "287761bfbe953e9a"
            ]
        ]
    },
    {
        "id": "b35a69dcf02647e9",
        "type": "debug",
        "z": "7054fec8bee5107d",
        "name": "debug 2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 570,
        "y": 80,
        "wires": []
    },
    {
        "id": "fccff133fa43d20e",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Calidad:001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 940,
        "wires": [
            [
                "eb32e90e33b68cd6"
            ]
        ]
    },
    {
        "id": "8019be669ba7835e",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Ventilador:001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 1000,
        "wires": [
            [
                "eb32e90e33b68cd6"
            ]
        ]
    },
    {
        "id": "ed70522b54eeb45a",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Viento:001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 1060,
        "wires": [
            [
                "eb32e90e33b68cd6"
            ]
        ]
    },
    {
        "id": "70edb664b865141b",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Molino:001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 1120,
        "wires": [
            [
                "eb32e90e33b68cd6"
            ]
        ]
    },
    {
        "id": "67a85bbba4c3912d",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Bateria:001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 1180,
        "wires": [
            [
                "eb32e90e33b68cd6"
            ]
        ]
    },
    {
        "id": "0b608e27d66ffcbc",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:TBateria:001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 1240,
        "wires": [
            [
                "eb32e90e33b68cd6"
            ]
        ]
    },
    {
        "id": "43d42e339efdc124",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:EPuerta:001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 1320,
        "wires": [
            [
                "eb32e90e33b68cd6"
            ]
        ]
    },
    {
        "id": "f78099bf149aebe1",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:IPuerta:001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 1380,
        "wires": [
            [
                "eb32e90e33b68cd6"
            ]
        ]
    },
    {
        "id": "eb4a6881d65a4077",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:SIncendios:001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 1440,
        "wires": [
            [
                "eb32e90e33b68cd6"
            ]
        ]
    },
    {
        "id": "554efe3c00ce6d2b",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Compuertas:001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 1500,
        "wires": [
            [
                "eb32e90e33b68cd6"
            ]
        ]
    },
    {
        "id": "0ec9c658ab7b0b4b",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:TNivel:001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 1560,
        "wires": [
            [
                "eb32e90e33b68cd6"
            ]
        ]
    },
    {
        "id": "d039760c91b7aa79",
        "type": "change",
        "z": "7054fec8bee5107d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:LNivel:001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 1620,
        "wires": [
            [
                "eb32e90e33b68cd6"
            ]
        ]
    },
    {
        "id": "94cce532fb8b4d84",
        "type": "inject",
        "z": "7054fec8bee5107d",
        "name": "execute request",
        "props": [
            {
                "p": "orion_ip",
                "v": "orion_ip",
                "vt": "flow"
            },
            {
                "p": "orion_puerto",
                "v": "orion_puerto",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "entity_id",
                "v": "Thing:lamp001",
                "vt": "str"
            },
            {
                "p": "oauth2-token",
                "v": "oauth2-token",
                "vt": "global"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 940,
        "wires": [
            [
                "fccff133fa43d20e",
                "8019be669ba7835e",
                "ed70522b54eeb45a",
                "70edb664b865141b",
                "67a85bbba4c3912d",
                "0b608e27d66ffcbc",
                "43d42e339efdc124",
                "f78099bf149aebe1",
                "eb4a6881d65a4077",
                "554efe3c00ce6d2b",
                "0ec9c658ab7b0b4b",
                "d039760c91b7aa79"
            ]
        ]
    },
    {
        "id": "eb32e90e33b68cd6",
        "type": "http request",
        "z": "7054fec8bee5107d",
        "name": "",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 930,
        "y": 1320,
        "wires": [
            [
                "b1839476860cd220"
            ]
        ]
    },
    {
        "id": "73295e939a63b903",
        "type": "json",
        "z": "7054fec8bee5107d",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1270,
        "y": 1360,
        "wires": [
            [
                "2e5e29e1e655f38f"
            ]
        ]
    },
    {
        "id": "2e5e29e1e655f38f",
        "type": "debug",
        "z": "7054fec8bee5107d",
        "name": "delete entity",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1450,
        "y": 1320,
        "wires": []
    },
    {
        "id": "b1839476860cd220",
        "type": "switch",
        "z": "7054fec8bee5107d",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1110,
        "y": 1320,
        "wires": [
            [
                "2e5e29e1e655f38f"
            ],
            [
                "73295e939a63b903"
            ]
        ]
    },
    {
        "id": "afda95cebe7746db",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "flow variables",
        "props": [
            {
                "p": "iota_ip",
                "v": "192.168.42.10",
                "vt": "str"
            },
            {
                "p": "iota_puerto_gestion",
                "v": "4061",
                "vt": "str"
            },
            {
                "p": "iota_puerto_datos",
                "v": "7896",
                "vt": "str"
            },
            {
                "p": "fiware_service",
                "v": "sco",
                "vt": "str"
            },
            {
                "p": "fiware_servicepath",
                "v": "/",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 190,
        "y": 60,
        "wires": [
            [
                "7a94521ccf179fd6"
            ]
        ]
    },
    {
        "id": "7a94521ccf179fd6",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "iota_ip",
                "pt": "flow",
                "to": "iota_ip",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "iota_puerto_gestion",
                "pt": "flow",
                "to": "iota_puerto_gestion",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "iota_puerto_datos",
                "pt": "flow",
                "to": "iota_puerto_datos",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "flow",
                "to": "fiware_service",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "flow",
                "to": "fiware_servicepath",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "c9f4c27a7741969a",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Services",
        "info": "",
        "x": 120,
        "y": 140,
        "wires": []
    },
    {
        "id": "16c338400db86c19",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Get services",
        "info": "",
        "x": 170,
        "y": 180,
        "wires": []
    },
    {
        "id": "a69434ddc5e040ea",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_gestion",
                "v": "iota_puerto_gestion",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 220,
        "wires": [
            [
                "10f08a66cf41e5b5"
            ]
        ]
    },
    {
        "id": "10f08a66cf41e5b5",
        "type": "http request",
        "z": "92d8fd98132b13ea",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://{{{iota_ip}}}:{{{iota_puerto_gestion}}}/iot/services",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            }
        ],
        "x": 410,
        "y": 220,
        "wires": [
            [
                "dfe50a4f024c0c11"
            ]
        ]
    },
    {
        "id": "dfe50a4f024c0c11",
        "type": "json",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 220,
        "wires": [
            [
                "6f7381788c9295a7"
            ]
        ]
    },
    {
        "id": "6f7381788c9295a7",
        "type": "debug",
        "z": "92d8fd98132b13ea",
        "name": "get services",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 220,
        "wires": []
    },
    {
        "id": "c157c73d38697fe2",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Create services",
        "info": "",
        "x": 180,
        "y": 300,
        "wires": []
    },
    {
        "id": "d98453ced16c3a00",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_gestion",
                "v": "iota_puerto_gestion",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"services\":[{\"apikey\":\"1234567890\",\"cbroker\":\"https://192.168.42.20:1026\",\"entity_type\":\"Thing\",\"resource\":\"/iot/json\"}]}",
        "payloadType": "json",
        "x": 200,
        "y": 340,
        "wires": [
            [
                "bcb967bbe5180d32"
            ]
        ]
    },
    {
        "id": "bcb967bbe5180d32",
        "type": "http request",
        "z": "92d8fd98132b13ea",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://{{{iota_ip}}}:{{{iota_puerto_gestion}}}/iot/services",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 410,
        "y": 340,
        "wires": [
            [
                "13e8d9d188e778ea"
            ]
        ]
    },
    {
        "id": "8c99d36725dfef8e",
        "type": "json",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 380,
        "wires": [
            [
                "61b84aa178332fca"
            ]
        ]
    },
    {
        "id": "61b84aa178332fca",
        "type": "debug",
        "z": "92d8fd98132b13ea",
        "name": "create services",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 340,
        "wires": []
    },
    {
        "id": "13e8d9d188e778ea",
        "type": "switch",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 340,
        "wires": [
            [
                "61b84aa178332fca"
            ],
            [
                "8c99d36725dfef8e"
            ]
        ]
    },
    {
        "id": "1f6be9ff9e76f8ee",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Delete service",
        "info": "",
        "x": 170,
        "y": 620,
        "wires": []
    },
    {
        "id": "8f8bd3fb4a121d10",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_gestion",
                "v": "iota_puerto_gestion",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "resource",
                "v": "/iot/json",
                "vt": "str"
            },
            {
                "p": "api_key",
                "v": "1234567890",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 660,
        "wires": [
            [
                "f5251f619e6f3e0d"
            ]
        ]
    },
    {
        "id": "f5251f619e6f3e0d",
        "type": "http request",
        "z": "92d8fd98132b13ea",
        "name": "",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://{{{iota_ip}}}:{{{iota_puerto_gestion}}}/iot/services/?resource={{{resource}}}&apikey={{{api_key}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            }
        ],
        "x": 410,
        "y": 660,
        "wires": [
            [
                "2091039f17f2fcc4"
            ]
        ]
    },
    {
        "id": "56381319bfcdbe75",
        "type": "json",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 700,
        "wires": [
            [
                "b79f69b92cd07dcb"
            ]
        ]
    },
    {
        "id": "b79f69b92cd07dcb",
        "type": "debug",
        "z": "92d8fd98132b13ea",
        "name": "delete service",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 660,
        "wires": []
    },
    {
        "id": "2091039f17f2fcc4",
        "type": "switch",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 660,
        "wires": [
            [
                "b79f69b92cd07dcb"
            ],
            [
                "56381319bfcdbe75"
            ]
        ]
    },
    {
        "id": "3ffc03a4698aa4bb",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Devices",
        "info": "",
        "x": 110,
        "y": 780,
        "wires": []
    },
    {
        "id": "864320f45b85e04f",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Get devices",
        "info": "",
        "x": 170,
        "y": 820,
        "wires": []
    },
    {
        "id": "92bdc6e458edf227",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_gestion",
                "v": "iota_puerto_gestion",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 860,
        "wires": [
            [
                "b8741209fb59e72f"
            ]
        ]
    },
    {
        "id": "b8741209fb59e72f",
        "type": "http request",
        "z": "92d8fd98132b13ea",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://{{{iota_ip}}}:{{{iota_puerto_gestion}}}/iot/devices",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            }
        ],
        "x": 410,
        "y": 860,
        "wires": [
            [
                "16f5721e7bbd7477"
            ]
        ]
    },
    {
        "id": "16f5721e7bbd7477",
        "type": "json",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 860,
        "wires": [
            [
                "b96cc9d6823ff655"
            ]
        ]
    },
    {
        "id": "b96cc9d6823ff655",
        "type": "debug",
        "z": "92d8fd98132b13ea",
        "name": "get devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 860,
        "wires": []
    },
    {
        "id": "55e6da5ea007dff7",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Create devices",
        "info": "",
        "x": 180,
        "y": 940,
        "wires": []
    },
    {
        "id": "b09fb42b25c80308",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_gestion",
                "v": "iota_puerto_gestion",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"devices\":[{\"device_id\":\"vc001\",\"entity_name\":\"urn:ngsi-ld:Calidad:001\",\"entity_type\":\"Thing\",\"transport\":\"HTTPS\",\"attributes\":[{\"name\":\"quality\",\"type\":\"Number\"}]},{\"device_id\":\"vv001\",\"entity_name\":\"urn:ngsi-ld:Ventilador:001\",\"entity_type\":\"Thing\",\"transport\":\"HTTPS\",\"attributes\":[{\"name\":\"on\",\"type\":\"Boolean\"}]},{\"device_id\":\"ev001\",\"entity_name\":\"urn:ngsi-ld:Viento:001\",\"entity_type\":\"Thing\",\"transport\":\"HTTPS\",\"attributes\":[{\"name\":\"speed\",\"type\":\"Number\"}]},{\"device_id\":\"em001\",\"entity_name\":\"urn:ngsi-ld:Molino:001\",\"entity_type\":\"Thing\",\"transport\":\"HTTPS\",\"attributes\":[{\"name\":\"on\",\"type\":\"Boolean\"}]},{\"device_id\":\"eb001\",\"entity_name\":\"urn:ngsi-ld:Bateria:001\",\"entity_type\":\"Thing\",\"transport\":\"HTTPS\",\"attributes\":[{\"name\":\"on\",\"type\":\"Boolean\"}]},{\"device_id\":\"et001\",\"entity_name\":\"urn:ngsi-ld:TBateria:001\",\"entity_type\":\"Thing\",\"transport\":\"HTTPS\",\"attributes\":[{\"name\":\"temp\",\"type\":\"Number\"}]},{\"device_id\":\"ae001\",\"entity_name\":\"urn:ngsi-ld:EPuerta:001\",\"entity_type\":\"Thing\",\"transport\":\"HTTPS\",\"attributes\":[{\"name\":\"locked\",\"type\":\"Boolean\"}]},{\"device_id\":\"ai001\",\"entity_name\":\"urn:ngsi-ld:IPuerta:001\",\"entity_type\":\"Thing\",\"transport\":\"HTTPS\",\"attributes\":[{\"name\":\"locked\",\"type\":\"Boolean\"}]},{\"device_id\":\"as001\",\"entity_name\":\"urn:ngsi-ld:SIncendios:001\",\"entity_type\":\"Thing\",\"transport\":\"HTTPS\",\"attributes\":[{\"name\":\"alarm\",\"type\":\"Boolean\"}]},{\"device_id\":\"hc001\",\"entity_name\":\"urn:ngsi-ld:Compuertas:001\",\"entity_type\":\"Thing\",\"transport\":\"HTTPS\",\"attributes\":[{\"name\":\"locked\",\"type\":\"Boolean\"}]},{\"device_id\":\"hca001\",\"entity_name\":\"urn:ngsi-ld:CalidadAgua:001\",\"entity_type\":\"Thing\",\"transport\":\"HTTPS\",\"attributes\":[{\"name\":\"quality\",\"type\":\"Number\"}]},{\"device_id\":\"hct001\",\"entity_name\":\"urn:ngsi-ld:CapacidadTanque:001\",\"entity_type\":\"Thing\",\"transport\":\"HTTPS\",\"attributes\":[{\"name\":\"capacity\",\"type\":\"Number\"}]}]}",
        "payloadType": "json",
        "x": 200,
        "y": 980,
        "wires": [
            [
                "910e41bf82b438a0"
            ]
        ]
    },
    {
        "id": "910e41bf82b438a0",
        "type": "http request",
        "z": "92d8fd98132b13ea",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://{{{iota_ip}}}:{{{iota_puerto_gestion}}}/iot/devices",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 410,
        "y": 980,
        "wires": [
            [
                "5a924d66d96828e6",
                "ef703bfbfa4f22d5"
            ]
        ]
    },
    {
        "id": "e7b76bb6f5b7392b",
        "type": "json",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 1020,
        "wires": [
            [
                "57ca771fa2d33763"
            ]
        ]
    },
    {
        "id": "57ca771fa2d33763",
        "type": "debug",
        "z": "92d8fd98132b13ea",
        "name": "create devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 980,
        "wires": []
    },
    {
        "id": "5a924d66d96828e6",
        "type": "switch",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 980,
        "wires": [
            [
                "57ca771fa2d33763"
            ],
            [
                "e7b76bb6f5b7392b"
            ]
        ]
    },
    {
        "id": "fe690796cfab3f25",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Delete devices",
        "info": "",
        "x": 180,
        "y": 1100,
        "wires": []
    },
    {
        "id": "02585d670356c2aa",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_gestion",
                "v": "iota_puerto_gestion",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "device_id",
                "v": "et001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 1180,
        "wires": [
            [
                "ae02c784ab5505f5"
            ]
        ]
    },
    {
        "id": "ae02c784ab5505f5",
        "type": "http request",
        "z": "92d8fd98132b13ea",
        "name": "",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://{{{iota_ip}}}:{{{iota_puerto_gestion}}}/iot/devices/{{{device_id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            }
        ],
        "x": 410,
        "y": 1200,
        "wires": [
            [
                "9fccb76d487e1355"
            ]
        ]
    },
    {
        "id": "0fd8bff55fa49e4e",
        "type": "json",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 1240,
        "wires": [
            [
                "307ab2c17874330c"
            ]
        ]
    },
    {
        "id": "307ab2c17874330c",
        "type": "debug",
        "z": "92d8fd98132b13ea",
        "name": "delete device",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 1200,
        "wires": []
    },
    {
        "id": "9fccb76d487e1355",
        "type": "switch",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 1200,
        "wires": [
            [
                "307ab2c17874330c"
            ],
            [
                "0fd8bff55fa49e4e"
            ]
        ]
    },
    {
        "id": "190fba59b83122fa",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Delete device: lamp001",
        "info": "",
        "x": 200,
        "y": 1140,
        "wires": []
    },
    {
        "id": "1d00429a9d2c90c5",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_gestion",
                "v": "iota_puerto_gestion",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "device_id",
                "v": "ev001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 1220,
        "wires": [
            [
                "ae02c784ab5505f5"
            ]
        ]
    },
    {
        "id": "11a0fbe2030b62e6",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Delete device: lamp002",
        "info": "",
        "x": 200,
        "y": 1260,
        "wires": []
    },
    {
        "id": "469b25b5a007d452",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Update devices",
        "info": "",
        "x": 180,
        "y": 1340,
        "wires": []
    },
    {
        "id": "9447ebf1741a1cac",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_datos",
                "v": "iota_puerto_datos",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "api_key",
                "v": "1234567890",
                "vt": "str"
            },
            {
                "p": "device_id",
                "v": "lamp001",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"o\":0}",
        "payloadType": "json",
        "x": 200,
        "y": 1420,
        "wires": [
            [
                "a979b20a7b5672ec"
            ]
        ]
    },
    {
        "id": "a979b20a7b5672ec",
        "type": "http request",
        "z": "92d8fd98132b13ea",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{iota_ip}}}:{{{iota_puerto_datos}}}/iot/json?k={{{api_key}}}&i={{{device_id}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 410,
        "y": 1440,
        "wires": [
            [
                "bcd885fa6993b402"
            ]
        ]
    },
    {
        "id": "c01e70fc451af416",
        "type": "json",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 1480,
        "wires": [
            [
                "20b49813fd8b3f91"
            ]
        ]
    },
    {
        "id": "20b49813fd8b3f91",
        "type": "debug",
        "z": "92d8fd98132b13ea",
        "name": "update devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 1440,
        "wires": []
    },
    {
        "id": "bcd885fa6993b402",
        "type": "switch",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 1440,
        "wires": [
            [
                "20b49813fd8b3f91"
            ],
            [
                "c01e70fc451af416"
            ]
        ]
    },
    {
        "id": "6e0fa1035c157295",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Update device lamp001: set on to 0",
        "info": "",
        "x": 240,
        "y": 1380,
        "wires": []
    },
    {
        "id": "0b0be8ae90f3ff06",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_datos",
                "v": "iota_puerto_datos",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "api_key",
                "v": "1234567890",
                "vt": "str"
            },
            {
                "p": "device_id",
                "v": "lamp001",
                "vt": "str"
            },
            {
                "p": "payload"
            },
            {
                "p": "rejectUnauthorized",
                "v": "false",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"o\":1}",
        "payloadType": "json",
        "x": 200,
        "y": 1460,
        "wires": [
            [
                "a979b20a7b5672ec"
            ]
        ]
    },
    {
        "id": "5a116cb68991e0e7",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Update device lamp001: set on to 1",
        "info": "",
        "x": 240,
        "y": 1500,
        "wires": []
    },
    {
        "id": "0676e8974314834c",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_datos",
                "v": "iota_puerto_datos",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "api_key",
                "v": "1234567890",
                "vt": "str"
            },
            {
                "p": "device_id",
                "v": "lamp002",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"on\":0}",
        "payloadType": "json",
        "x": 200,
        "y": 1620,
        "wires": [
            [
                "32dbbe4b64bcb3df"
            ]
        ]
    },
    {
        "id": "32dbbe4b64bcb3df",
        "type": "http request",
        "z": "92d8fd98132b13ea",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{iota_ip}}}:{{{iota_puerto_datos}}}/iot/json?k={{{api_key}}}&i={{{device_id}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 410,
        "y": 1640,
        "wires": [
            [
                "a5967ce22ebdec24"
            ]
        ]
    },
    {
        "id": "a09a2d87a00a243d",
        "type": "json",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 1680,
        "wires": [
            [
                "165ee383cfc8dc52"
            ]
        ]
    },
    {
        "id": "165ee383cfc8dc52",
        "type": "debug",
        "z": "92d8fd98132b13ea",
        "name": "update devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 1640,
        "wires": []
    },
    {
        "id": "a5967ce22ebdec24",
        "type": "switch",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 1640,
        "wires": [
            [
                "165ee383cfc8dc52"
            ],
            [
                "a09a2d87a00a243d"
            ]
        ]
    },
    {
        "id": "f484a019722523a7",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Update device lamp002: set on to 0",
        "info": "",
        "x": 240,
        "y": 1580,
        "wires": []
    },
    {
        "id": "c8a67eb65b249f95",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_datos",
                "v": "iota_puerto_datos",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "api_key",
                "v": "1234567890",
                "vt": "str"
            },
            {
                "p": "device_id",
                "v": "lamp002",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"on\":1}",
        "payloadType": "json",
        "x": 200,
        "y": 1660,
        "wires": [
            [
                "32dbbe4b64bcb3df"
            ]
        ]
    },
    {
        "id": "f7c6aeeaa4101a3b",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Update device lamp002: set on to 1",
        "info": "",
        "x": 240,
        "y": 1700,
        "wires": []
    },
    {
        "id": "d1b393f505c05540",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "Inject permanent key to service",
        "info": "",
        "x": 230,
        "y": 460,
        "wires": []
    },
    {
        "id": "3396a78f4d1baf2f",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_gestion",
                "v": "iota_puerto_gestion",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "resource",
                "v": "/iot/json",
                "vt": "str"
            },
            {
                "p": "api_key",
                "v": "1234567890",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t    \"cbroker\": \"https://192.168.42.20:1026\",\t    \"trust\": $globalContext(\"oauth2-token\")\t}",
        "payloadType": "jsonata",
        "x": 200,
        "y": 500,
        "wires": [
            [
                "7fdc4439958bdb13"
            ]
        ]
    },
    {
        "id": "7fdc4439958bdb13",
        "type": "http request",
        "z": "92d8fd98132b13ea",
        "name": "",
        "method": "PUT",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://{{{iota_ip}}}:{{{iota_puerto_gestion}}}/iot/services/?resource={{{resource}}}&apikey={{{api_key}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 410,
        "y": 500,
        "wires": [
            [
                "3af0ac09d8e2fc51"
            ]
        ]
    },
    {
        "id": "184d09ddccd6a54f",
        "type": "json",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 540,
        "wires": [
            [
                "1f0ea1c816ef4e66"
            ]
        ]
    },
    {
        "id": "1f0ea1c816ef4e66",
        "type": "debug",
        "z": "92d8fd98132b13ea",
        "name": "inject permanent key to service",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 500,
        "wires": []
    },
    {
        "id": "3af0ac09d8e2fc51",
        "type": "switch",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 500,
        "wires": [
            [
                "1f0ea1c816ef4e66"
            ],
            [
                "184d09ddccd6a54f"
            ]
        ]
    },
    {
        "id": "ef703bfbfa4f22d5",
        "type": "debug",
        "z": "92d8fd98132b13ea",
        "name": "debug 4",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 570,
        "y": 920,
        "wires": []
    },
    {
        "id": "a81d3b5dc582f44b",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_datos",
                "v": "iota_puerto_datos",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "api_key",
                "v": "1234567890",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 2180,
        "wires": [
            [
                "8ed633444144507b",
                "42f4fa61ff6c5da5",
                "a9d6394f969abd77",
                "baaf49c287c2603e",
                "e35b8cf389b68690",
                "271dbb24f6c54b5a",
                "0b9dfb727a320863",
                "692da0ba0f351fd9",
                "595694dc534b4ac5",
                "c31dc995def4fde1",
                "a7e27477b0510288",
                "8afc857a0710eed6"
            ]
        ]
    },
    {
        "id": "2ef6ee7c5c8fd52a",
        "type": "http request",
        "z": "92d8fd98132b13ea",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{iota_ip}}}:{{{iota_puerto_datos}}}/iot/json?k={{{api_key}}}&i={{{device_id}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 830,
        "y": 2180,
        "wires": [
            [
                "788a9a7395a1a13b"
            ]
        ]
    },
    {
        "id": "e19b650824b3b37f",
        "type": "json",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1130,
        "y": 2180,
        "wires": [
            [
                "b02e56ad3daa9ead"
            ]
        ]
    },
    {
        "id": "b02e56ad3daa9ead",
        "type": "debug",
        "z": "92d8fd98132b13ea",
        "name": "update devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1280,
        "y": 2180,
        "wires": []
    },
    {
        "id": "788a9a7395a1a13b",
        "type": "switch",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1010,
        "y": 2180,
        "wires": [
            [
                "b02e56ad3daa9ead"
            ],
            [
                "e19b650824b3b37f"
            ]
        ]
    },
    {
        "id": "8ed633444144507b",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "vc001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"quality\": 95}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 1880,
        "wires": [
            [
                "2ef6ee7c5c8fd52a"
            ]
        ]
    },
    {
        "id": "3b639b5376847252",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "SET INITIAL VALUES OF DEVICES",
        "info": "",
        "x": 220,
        "y": 1840,
        "wires": []
    },
    {
        "id": "42f4fa61ff6c5da5",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "vv001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\": \"false\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 1940,
        "wires": [
            [
                "2ef6ee7c5c8fd52a"
            ]
        ]
    },
    {
        "id": "a9d6394f969abd77",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "ev001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"speed\": \"50\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 2000,
        "wires": [
            [
                "2ef6ee7c5c8fd52a"
            ]
        ]
    },
    {
        "id": "baaf49c287c2603e",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "em001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\": \"false\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 2060,
        "wires": [
            [
                "2ef6ee7c5c8fd52a"
            ]
        ]
    },
    {
        "id": "e35b8cf389b68690",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "eb001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\": \"false\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 2120,
        "wires": [
            [
                "2ef6ee7c5c8fd52a"
            ]
        ]
    },
    {
        "id": "271dbb24f6c54b5a",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "et001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"temp\": 25}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 2180,
        "wires": [
            [
                "2ef6ee7c5c8fd52a"
            ]
        ]
    },
    {
        "id": "0b9dfb727a320863",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "ae001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"locked\": \"true\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 2240,
        "wires": [
            [
                "2ef6ee7c5c8fd52a"
            ]
        ]
    },
    {
        "id": "692da0ba0f351fd9",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "ai001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"locked\": \"true\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 2300,
        "wires": [
            [
                "2ef6ee7c5c8fd52a"
            ]
        ]
    },
    {
        "id": "595694dc534b4ac5",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "as001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"alarm\": \"false\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 2360,
        "wires": [
            [
                "2ef6ee7c5c8fd52a"
            ]
        ]
    },
    {
        "id": "c31dc995def4fde1",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "hc001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"locked\": \"false\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 2420,
        "wires": [
            [
                "2ef6ee7c5c8fd52a"
            ]
        ]
    },
    {
        "id": "8afc857a0710eed6",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "hca001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"quality\": \"95\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 2480,
        "wires": [
            [
                "2ef6ee7c5c8fd52a"
            ]
        ]
    },
    {
        "id": "a7e27477b0510288",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "hct001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"capacity\": 65}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 2540,
        "wires": [
            [
                "2ef6ee7c5c8fd52a"
            ]
        ]
    },
    {
        "id": "a37089732b370f96",
        "type": "inject",
        "z": "92d8fd98132b13ea",
        "name": "execute request",
        "props": [
            {
                "p": "iota_ip",
                "v": "iota_ip",
                "vt": "flow"
            },
            {
                "p": "iota_puerto_gestion",
                "v": "iota_puerto_gestion",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 120,
        "y": 3000,
        "wires": [
            [
                "845f5433b14df17c",
                "5e85a4a570939668",
                "6e3641af194c094d",
                "3a4c4c6ecbc9d2a2",
                "912ce13f2d439165",
                "eb07e5e71e87d221",
                "119add5390bf123d",
                "7c82b63e9f9f6a2a",
                "afaaa8db8bcfe2a9",
                "a293e0bcca0b6d05",
                "5402607a85c07d85",
                "fa81f74f50f9366b"
            ]
        ]
    },
    {
        "id": "f3b6a6387e49278d",
        "type": "json",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1110,
        "y": 2980,
        "wires": [
            [
                "7057db3ddc4f4344"
            ]
        ]
    },
    {
        "id": "7057db3ddc4f4344",
        "type": "debug",
        "z": "92d8fd98132b13ea",
        "name": "update devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1260,
        "y": 2980,
        "wires": []
    },
    {
        "id": "c3bdbf1ff88b6113",
        "type": "switch",
        "z": "92d8fd98132b13ea",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 2980,
        "wires": [
            [
                "7057db3ddc4f4344"
            ],
            [
                "f3b6a6387e49278d"
            ]
        ]
    },
    {
        "id": "845f5433b14df17c",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "vc001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 2700,
        "wires": [
            [
                "3bc0d37393eda8b2"
            ]
        ]
    },
    {
        "id": "ebb4ad13c5d55596",
        "type": "comment",
        "z": "92d8fd98132b13ea",
        "name": "DELETE ALL DEVICES",
        "info": "",
        "x": 140,
        "y": 2640,
        "wires": []
    },
    {
        "id": "5e85a4a570939668",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "vv001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 2760,
        "wires": [
            [
                "3bc0d37393eda8b2"
            ]
        ]
    },
    {
        "id": "6e3641af194c094d",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "ev001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 2820,
        "wires": [
            [
                "3bc0d37393eda8b2"
            ]
        ]
    },
    {
        "id": "3a4c4c6ecbc9d2a2",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "em001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 2880,
        "wires": [
            [
                "3bc0d37393eda8b2"
            ]
        ]
    },
    {
        "id": "912ce13f2d439165",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "eb001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 2940,
        "wires": [
            [
                "3bc0d37393eda8b2"
            ]
        ]
    },
    {
        "id": "eb07e5e71e87d221",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "et001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 3000,
        "wires": [
            [
                "3bc0d37393eda8b2"
            ]
        ]
    },
    {
        "id": "119add5390bf123d",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "ae001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 3060,
        "wires": [
            [
                "3bc0d37393eda8b2"
            ]
        ]
    },
    {
        "id": "7c82b63e9f9f6a2a",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "ai001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 3120,
        "wires": [
            [
                "3bc0d37393eda8b2"
            ]
        ]
    },
    {
        "id": "afaaa8db8bcfe2a9",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "as001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 3180,
        "wires": [
            [
                "3bc0d37393eda8b2"
            ]
        ]
    },
    {
        "id": "a293e0bcca0b6d05",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "hc001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 3240,
        "wires": [
            [
                "3bc0d37393eda8b2"
            ]
        ]
    },
    {
        "id": "fa81f74f50f9366b",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "hca001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 3300,
        "wires": [
            [
                "3bc0d37393eda8b2"
            ]
        ]
    },
    {
        "id": "5402607a85c07d85",
        "type": "change",
        "z": "92d8fd98132b13ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device_id",
                "pt": "msg",
                "to": "hct001",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 3360,
        "wires": [
            [
                "3bc0d37393eda8b2"
            ]
        ]
    },
    {
        "id": "3bc0d37393eda8b2",
        "type": "http request",
        "z": "92d8fd98132b13ea",
        "name": "",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://{{{iota_ip}}}:{{{iota_puerto_gestion}}}/iot/devices/{{{device_id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            }
        ],
        "x": 810,
        "y": 2980,
        "wires": [
            [
                "c3bdbf1ff88b6113"
            ]
        ]
    },
    {
        "id": "3418cd3335a0b93b",
        "type": "comment",
        "z": "66697df425b4ad85",
        "name": "Get Calidad Aire",
        "info": "",
        "x": 440,
        "y": 180,
        "wires": []
    },
    {
        "id": "4bb0d100f030ce4d",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 710,
        "y": 220,
        "wires": [
            [
                "f7200232f5c22fe3"
            ]
        ]
    },
    {
        "id": "f7200232f5c22fe3",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 220,
        "wires": [
            [
                "5924072e5be741b0"
            ]
        ]
    },
    {
        "id": "875faf33c50bacb7",
        "type": "inject",
        "z": "66697df425b4ad85",
        "name": "flow variables",
        "props": [
            {
                "p": "orion_ip",
                "v": "192.168.41.20",
                "vt": "str"
            },
            {
                "p": "orion_puerto",
                "v": "1026",
                "vt": "str"
            },
            {
                "p": "fiware_service",
                "v": "sco",
                "vt": "str"
            },
            {
                "p": "fiware_servicepath",
                "v": "/",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 450,
        "y": 100,
        "wires": [
            [
                "d1b32033fb4e25ea"
            ]
        ]
    },
    {
        "id": "d1b32033fb4e25ea",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orion_ip",
                "pt": "flow",
                "to": "orion_ip",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion_puerto",
                "pt": "flow",
                "to": "orion_puerto",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "flow",
                "to": "fiware_service",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "flow",
                "to": "fiware_servicepath",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "43e2998056e32459",
        "type": "ui_gauge",
        "z": "66697df425b4ad85",
        "name": "",
        "group": "95bc0ee9d93efab4",
        "order": 1,
        "width": "8",
        "height": "4",
        "gtype": "gage",
        "title": "Temperatura Bateria",
        "label": "C¬∫",
        "format": "{{msg.payload.value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#f5c211",
            "#c01c28"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 1040,
        "y": 360,
        "wires": []
    },
    {
        "id": "b6067b17ef910f86",
        "type": "comment",
        "z": "66697df425b4ad85",
        "name": "Get Temperatura Bateria ",
        "info": "",
        "x": 470,
        "y": 320,
        "wires": []
    },
    {
        "id": "52bf2d6754cc07e8",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 710,
        "y": 360,
        "wires": [
            [
                "e592dea56330d277"
            ]
        ]
    },
    {
        "id": "e592dea56330d277",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 360,
        "wires": [
            [
                "43e2998056e32459"
            ]
        ]
    },
    {
        "id": "5924072e5be741b0",
        "type": "ui_gauge",
        "z": "66697df425b4ad85",
        "name": "",
        "group": "95bc0ee9d93efab4",
        "order": 1,
        "width": "8",
        "height": "4",
        "gtype": "gage",
        "title": "Calidad Aire",
        "label": "%",
        "format": "{{msg.payload.value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#c01c28",
            "#e5a50a",
            "#26a269"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 1070,
        "y": 220,
        "wires": []
    },
    {
        "id": "c40bec42e04e0e03",
        "type": "ui_switch",
        "z": "66697df425b4ad85",
        "name": "",
        "label": "Ventilador",
        "tooltip": "",
        "group": "95bc0ee9d93efab4",
        "order": 2,
        "width": "8",
        "height": "2",
        "passthru": true,
        "decouple": "false",
        "topic": "payload.value",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1260,
        "y": 500,
        "wires": [
            [
                "e0ac9d5a982679d4"
            ]
        ]
    },
    {
        "id": "22d7c38adb3fd815",
        "type": "comment",
        "z": "66697df425b4ad85",
        "name": "Ventilador Switch",
        "info": "",
        "x": 440,
        "y": 820,
        "wires": []
    },
    {
        "id": "73291a0a943daf79",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 710,
        "y": 860,
        "wires": [
            [
                "a46cb62b4105af1c"
            ]
        ]
    },
    {
        "id": "a46cb62b4105af1c",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 860,
        "wires": [
            [
                "4b8e02e49f0e573a"
            ]
        ]
    },
    {
        "id": "e0ac9d5a982679d4",
        "type": "function",
        "z": "66697df425b4ad85",
        "name": "function 4",
        "func": "\nmsg.payload = {\n    \"on\": {\n        \"value\": msg.payload\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 500,
        "wires": [
            [
                "c6b308b6f8b62ccf"
            ]
        ]
    },
    {
        "id": "c6b308b6f8b62ccf",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orion_ip",
                "pt": "msg",
                "to": "orion_ip",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion_puerto",
                "pt": "msg",
                "to": "orion_puerto",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "msg",
                "to": "fiware_service",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "msg",
                "to": "fiware_servicepath",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Ventilador:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "oauth2-token",
                "pt": "msg",
                "to": "oauth2-token",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 500,
        "wires": [
            [
                "14595e68ec1c38fd"
            ]
        ]
    },
    {
        "id": "14595e68ec1c38fd",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 1810,
        "y": 500,
        "wires": [
            [
                "4abcb4a15c8c1229"
            ]
        ]
    },
    {
        "id": "aa14eadfd3c0e6fd",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 2130,
        "y": 520,
        "wires": [
            [
                "57782702c6a41789"
            ]
        ]
    },
    {
        "id": "57782702c6a41789",
        "type": "debug",
        "z": "66697df425b4ad85",
        "name": "update devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2320,
        "y": 500,
        "wires": []
    },
    {
        "id": "4abcb4a15c8c1229",
        "type": "switch",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1990,
        "y": 500,
        "wires": [
            [
                "57782702c6a41789"
            ],
            [
                "aa14eadfd3c0e6fd"
            ]
        ]
    },
    {
        "id": "e27c0bce69e959e2",
        "type": "ui_switch",
        "z": "66697df425b4ad85",
        "name": "",
        "label": "Molino",
        "tooltip": "",
        "group": "95bc0ee9d93efab4",
        "order": 2,
        "width": "8",
        "height": "2",
        "passthru": true,
        "decouple": "false",
        "topic": "payload.value",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1250,
        "y": 620,
        "wires": [
            [
                "c2e69c04dbc41759"
            ]
        ]
    },
    {
        "id": "f97c8a756842bff8",
        "type": "comment",
        "z": "66697df425b4ad85",
        "name": "Molino Switch",
        "info": "",
        "x": 430,
        "y": 940,
        "wires": []
    },
    {
        "id": "7546cdd4c056ea85",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 710,
        "y": 980,
        "wires": [
            [
                "57e7fca69cef6ed4"
            ]
        ]
    },
    {
        "id": "57e7fca69cef6ed4",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 980,
        "wires": [
            [
                "fa077081ed0d810d"
            ]
        ]
    },
    {
        "id": "c2e69c04dbc41759",
        "type": "function",
        "z": "66697df425b4ad85",
        "name": "function 5",
        "func": "\nmsg.payload = {\n    \"on\": {\n        \"value\": msg.payload\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 620,
        "wires": [
            [
                "616af5adb15fb5cb"
            ]
        ]
    },
    {
        "id": "616af5adb15fb5cb",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orion_ip",
                "pt": "msg",
                "to": "orion_ip",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion_puerto",
                "pt": "msg",
                "to": "orion_puerto",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "msg",
                "to": "fiware_service",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "msg",
                "to": "fiware_servicepath",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Molino:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "oauth2-token",
                "pt": "msg",
                "to": "oauth2-token",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 620,
        "wires": [
            [
                "d6c594937cb97476"
            ]
        ]
    },
    {
        "id": "d6c594937cb97476",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 1810,
        "y": 620,
        "wires": [
            [
                "2cd51e3bb2e3013c"
            ]
        ]
    },
    {
        "id": "c0f4712f20d3f88e",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 2130,
        "y": 640,
        "wires": [
            [
                "0fbf9eec86b6b2b9"
            ]
        ]
    },
    {
        "id": "0fbf9eec86b6b2b9",
        "type": "debug",
        "z": "66697df425b4ad85",
        "name": "update devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2320,
        "y": 620,
        "wires": []
    },
    {
        "id": "2cd51e3bb2e3013c",
        "type": "switch",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1990,
        "y": 620,
        "wires": [
            [
                "0fbf9eec86b6b2b9"
            ],
            [
                "c0f4712f20d3f88e"
            ]
        ]
    },
    {
        "id": "e232dae6dbca59e1",
        "type": "ui_switch",
        "z": "66697df425b4ad85",
        "name": "",
        "label": "Bateria",
        "tooltip": "",
        "group": "95bc0ee9d93efab4",
        "order": 2,
        "width": "8",
        "height": "2",
        "passthru": true,
        "decouple": "false",
        "topic": "payload.value",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1260,
        "y": 740,
        "wires": [
            [
                "5da7141ea85a6642"
            ]
        ]
    },
    {
        "id": "5af1201249258025",
        "type": "comment",
        "z": "66697df425b4ad85",
        "name": "Bateria Switch",
        "info": "",
        "x": 430,
        "y": 1060,
        "wires": []
    },
    {
        "id": "9176cf462b268ceb",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 710,
        "y": 1100,
        "wires": [
            [
                "4cf24103dd0db395"
            ]
        ]
    },
    {
        "id": "5da7141ea85a6642",
        "type": "function",
        "z": "66697df425b4ad85",
        "name": "function 6",
        "func": "\nmsg.payload = {\n    \"on\": {\n        \"value\": msg.payload\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 740,
        "wires": [
            [
                "ce43395ec89d0bd8"
            ]
        ]
    },
    {
        "id": "ce43395ec89d0bd8",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orion_ip",
                "pt": "msg",
                "to": "orion_ip",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion_puerto",
                "pt": "msg",
                "to": "orion_puerto",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "msg",
                "to": "fiware_service",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "msg",
                "to": "fiware_servicepath",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Bateria:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "oauth2-token",
                "pt": "msg",
                "to": "oauth2-token",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 740,
        "wires": [
            [
                "0472221c97bc600a"
            ]
        ]
    },
    {
        "id": "0472221c97bc600a",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 1810,
        "y": 740,
        "wires": [
            [
                "683f19cd4d462b15"
            ]
        ]
    },
    {
        "id": "1b679f8bd696da2d",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 2130,
        "y": 760,
        "wires": [
            [
                "e0d17ced53dc9c35"
            ]
        ]
    },
    {
        "id": "e0d17ced53dc9c35",
        "type": "debug",
        "z": "66697df425b4ad85",
        "name": "update devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2320,
        "y": 740,
        "wires": []
    },
    {
        "id": "683f19cd4d462b15",
        "type": "switch",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1990,
        "y": 740,
        "wires": [
            [
                "e0d17ced53dc9c35"
            ],
            [
                "1b679f8bd696da2d"
            ]
        ]
    },
    {
        "id": "ee563c1ecbce1bd8",
        "type": "ui_gauge",
        "z": "66697df425b4ad85",
        "name": "",
        "group": "95bc0ee9d93efab4",
        "order": 1,
        "width": "8",
        "height": "4",
        "gtype": "compass",
        "title": "Velocidad Viento",
        "label": "Km/h",
        "format": "{{msg.payload.value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#f5c211",
            "#c01c28"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 1050,
        "y": 500,
        "wires": []
    },
    {
        "id": "be8952c7e161cbaa",
        "type": "comment",
        "z": "66697df425b4ad85",
        "name": "Get Velocidad Viento ",
        "info": "",
        "x": 450,
        "y": 460,
        "wires": []
    },
    {
        "id": "693bf480b022193c",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 670,
        "y": 500,
        "wires": [
            [
                "c5380df3106caf6a"
            ]
        ]
    },
    {
        "id": "c5380df3106caf6a",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 810,
        "y": 500,
        "wires": [
            [
                "ee563c1ecbce1bd8",
                "2d0ec03bdb9eb469"
            ]
        ]
    },
    {
        "id": "5ab943cbff8f67a0",
        "type": "ui_switch",
        "z": "66697df425b4ad85",
        "name": "",
        "label": "Puerta Exterior",
        "tooltip": "",
        "group": "95bc0ee9d93efab4",
        "order": 2,
        "width": "8",
        "height": "2",
        "passthru": true,
        "decouple": "false",
        "topic": "payload.value",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1280,
        "y": 860,
        "wires": [
            [
                "dca9827e580cb41e"
            ]
        ]
    },
    {
        "id": "9bdbd042739eb41a",
        "type": "comment",
        "z": "66697df425b4ad85",
        "name": "Puerta Exterior Switch",
        "info": "",
        "x": 460,
        "y": 1180,
        "wires": []
    },
    {
        "id": "dfad28025814241a",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 710,
        "y": 1220,
        "wires": [
            [
                "428070559bb13b97"
            ]
        ]
    },
    {
        "id": "dca9827e580cb41e",
        "type": "function",
        "z": "66697df425b4ad85",
        "name": "function 8",
        "func": "\nmsg.payload = {\n    \"locked\": {\n        \"value\": msg.payload\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 860,
        "wires": [
            [
                "1f81158ee6cf2b67"
            ]
        ]
    },
    {
        "id": "1f81158ee6cf2b67",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orion_ip",
                "pt": "msg",
                "to": "orion_ip",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion_puerto",
                "pt": "msg",
                "to": "orion_puerto",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "msg",
                "to": "fiware_service",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "msg",
                "to": "fiware_servicepath",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:EPuerta:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "oauth2-token",
                "pt": "msg",
                "to": "oauth2-token",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 860,
        "wires": [
            [
                "0358efc435f15715"
            ]
        ]
    },
    {
        "id": "0358efc435f15715",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 1810,
        "y": 860,
        "wires": [
            [
                "efffcda7319d3bfb"
            ]
        ]
    },
    {
        "id": "a76ff04b8be3b16a",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 2130,
        "y": 880,
        "wires": [
            [
                "91e9123bf87d38fb"
            ]
        ]
    },
    {
        "id": "91e9123bf87d38fb",
        "type": "debug",
        "z": "66697df425b4ad85",
        "name": "update devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2320,
        "y": 860,
        "wires": []
    },
    {
        "id": "efffcda7319d3bfb",
        "type": "switch",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1990,
        "y": 860,
        "wires": [
            [
                "91e9123bf87d38fb"
            ],
            [
                "a76ff04b8be3b16a"
            ]
        ]
    },
    {
        "id": "cde5f0cc2c0192a8",
        "type": "ui_switch",
        "z": "66697df425b4ad85",
        "name": "",
        "label": "Puerta Interior",
        "tooltip": "",
        "group": "95bc0ee9d93efab4",
        "order": 2,
        "width": "8",
        "height": "2",
        "passthru": false,
        "decouple": "false",
        "topic": "payload.value",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1280,
        "y": 980,
        "wires": [
            [
                "0088a1176edd51b1"
            ]
        ]
    },
    {
        "id": "b424375371e883c3",
        "type": "comment",
        "z": "66697df425b4ad85",
        "name": "Compuerta Interior Switch",
        "info": "",
        "x": 470,
        "y": 1300,
        "wires": []
    },
    {
        "id": "b9726b56927dde5d",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 710,
        "y": 1340,
        "wires": [
            [
                "2a195b17c664b460"
            ]
        ]
    },
    {
        "id": "0088a1176edd51b1",
        "type": "function",
        "z": "66697df425b4ad85",
        "name": "function 9",
        "func": "\nmsg.payload = {\n    \"locked\": {\n        \"value\": msg.payload\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 980,
        "wires": [
            [
                "61e9d53cdc6ddc7b"
            ]
        ]
    },
    {
        "id": "61e9d53cdc6ddc7b",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orion_ip",
                "pt": "msg",
                "to": "orion_ip",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion_puerto",
                "pt": "msg",
                "to": "orion_puerto",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "msg",
                "to": "fiware_service",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "msg",
                "to": "fiware_servicepath",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:IPuerta:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "oauth2-token",
                "pt": "msg",
                "to": "oauth2-token",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 980,
        "wires": [
            [
                "b714a3a8ca27b75c"
            ]
        ]
    },
    {
        "id": "b714a3a8ca27b75c",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 1810,
        "y": 980,
        "wires": [
            [
                "c67040e8e141589f"
            ]
        ]
    },
    {
        "id": "55a58e0f0f91d178",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 2130,
        "y": 1000,
        "wires": [
            [
                "2e34ac5d8005c041"
            ]
        ]
    },
    {
        "id": "2e34ac5d8005c041",
        "type": "debug",
        "z": "66697df425b4ad85",
        "name": "update devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2320,
        "y": 980,
        "wires": []
    },
    {
        "id": "c67040e8e141589f",
        "type": "switch",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1990,
        "y": 980,
        "wires": [
            [
                "2e34ac5d8005c041"
            ],
            [
                "55a58e0f0f91d178"
            ]
        ]
    },
    {
        "id": "cec47b9eda3c1ddb",
        "type": "ui_switch",
        "z": "66697df425b4ad85",
        "name": "",
        "label": "Compuertas Agua",
        "tooltip": "",
        "group": "95bc0ee9d93efab4",
        "order": 2,
        "width": "8",
        "height": "2",
        "passthru": true,
        "decouple": "false",
        "topic": "payload.value",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1290,
        "y": 1100,
        "wires": [
            [
                "f003271d84030ffe"
            ]
        ]
    },
    {
        "id": "499e6489699b7923",
        "type": "comment",
        "z": "66697df425b4ad85",
        "name": "Compuertas Hidraulicas Switch",
        "info": "",
        "x": 490,
        "y": 1420,
        "wires": []
    },
    {
        "id": "64df86971052549b",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 710,
        "y": 1460,
        "wires": [
            [
                "a3a0af7e1b2c51f7"
            ]
        ]
    },
    {
        "id": "a3a0af7e1b2c51f7",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 1460,
        "wires": [
            [
                "a56ad40f3a32b894"
            ]
        ]
    },
    {
        "id": "f003271d84030ffe",
        "type": "function",
        "z": "66697df425b4ad85",
        "name": "function 10",
        "func": "\nmsg.payload = {\n    \"locked\": {\n        \"value\": msg.payload\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1490,
        "y": 1100,
        "wires": [
            [
                "9afc3e131cadc7dd"
            ]
        ]
    },
    {
        "id": "9afc3e131cadc7dd",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orion_ip",
                "pt": "msg",
                "to": "orion_ip",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion_puerto",
                "pt": "msg",
                "to": "orion_puerto",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "fiware_service",
                "pt": "msg",
                "to": "fiware_service",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "fiware_servicepath",
                "pt": "msg",
                "to": "fiware_servicepath",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Compuertas:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "oauth2-token",
                "pt": "msg",
                "to": "oauth2-token",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1670,
        "y": 1100,
        "wires": [
            [
                "4e61613bdeba8878"
            ]
        ]
    },
    {
        "id": "4e61613bdeba8878",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 1860,
        "y": 1100,
        "wires": [
            [
                "154394f09f857ec6"
            ]
        ]
    },
    {
        "id": "64089dd5f71878dc",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 2180,
        "y": 1120,
        "wires": [
            [
                "e019657e42307be2"
            ]
        ]
    },
    {
        "id": "e019657e42307be2",
        "type": "debug",
        "z": "66697df425b4ad85",
        "name": "update devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2370,
        "y": 1100,
        "wires": []
    },
    {
        "id": "154394f09f857ec6",
        "type": "switch",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2040,
        "y": 1100,
        "wires": [
            [
                "e019657e42307be2"
            ],
            [
                "64089dd5f71878dc"
            ]
        ]
    },
    {
        "id": "5b1497d734e3a1c7",
        "type": "comment",
        "z": "66697df425b4ad85",
        "name": "Get Calidad Agua",
        "info": "",
        "x": 440,
        "y": 580,
        "wires": []
    },
    {
        "id": "ce7f67daba977823",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 670,
        "y": 620,
        "wires": [
            [
                "fdf4cbb3c0a2e08e"
            ]
        ]
    },
    {
        "id": "fdf4cbb3c0a2e08e",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 810,
        "y": 620,
        "wires": [
            [
                "81be511c3a4b4960"
            ]
        ]
    },
    {
        "id": "81be511c3a4b4960",
        "type": "ui_gauge",
        "z": "66697df425b4ad85",
        "name": "",
        "group": "95bc0ee9d93efab4",
        "order": 1,
        "width": "8",
        "height": "4",
        "gtype": "gage",
        "title": "Calidad Agua",
        "label": "%",
        "format": "{{msg.payload.value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#c01c28",
            "#e5a50a",
            "#26a269"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 1060,
        "y": 620,
        "wires": []
    },
    {
        "id": "12e31d74a88e3a92",
        "type": "ui_gauge",
        "z": "66697df425b4ad85",
        "name": "",
        "group": "95bc0ee9d93efab4",
        "order": 1,
        "width": "8",
        "height": "12",
        "gtype": "wave",
        "title": "Capacidad Tanque",
        "label": "%",
        "format": "{{msg.payload.value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#f5c211",
            "#c01c28"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 1050,
        "y": 740,
        "wires": []
    },
    {
        "id": "d76e53f5f98a8330",
        "type": "comment",
        "z": "66697df425b4ad85",
        "name": "Get Capacidad Tanque ",
        "info": "",
        "x": 460,
        "y": 700,
        "wires": []
    },
    {
        "id": "94c01c2184b26716",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 670,
        "y": 740,
        "wires": [
            [
                "79533d280611e608"
            ]
        ]
    },
    {
        "id": "79533d280611e608",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 810,
        "y": 740,
        "wires": [
            [
                "12e31d74a88e3a92"
            ]
        ]
    },
    {
        "id": "4cf24103dd0db395",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 1100,
        "wires": [
            [
                "73b4443d5ec27402"
            ]
        ]
    },
    {
        "id": "428070559bb13b97",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 1220,
        "wires": [
            [
                "482474ec42e8fcae"
            ]
        ]
    },
    {
        "id": "2a195b17c664b460",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 1340,
        "wires": [
            [
                "e73387efa0d9b613"
            ]
        ]
    },
    {
        "id": "482474ec42e8fcae",
        "type": "ui_text",
        "z": "66697df425b4ad85",
        "group": "95bc0ee9d93efab4",
        "order": 13,
        "width": "8",
        "height": "1",
        "name": "",
        "label": "Puerta Exterior",
        "format": "{{msg.payload.value ? \"Cerrada\" : \"Abierta\"}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1060,
        "y": 1220,
        "wires": []
    },
    {
        "id": "e73387efa0d9b613",
        "type": "ui_text",
        "z": "66697df425b4ad85",
        "group": "95bc0ee9d93efab4",
        "order": 13,
        "width": "8",
        "height": "1",
        "name": "",
        "label": "Puerta Interior",
        "format": "{{msg.payload.value ? \"Cerrada\" : \"Abierta\"}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1060,
        "y": 1340,
        "wires": []
    },
    {
        "id": "73b4443d5ec27402",
        "type": "ui_text",
        "z": "66697df425b4ad85",
        "group": "95bc0ee9d93efab4",
        "order": 13,
        "width": "8",
        "height": "1",
        "name": "",
        "label": "Estado Bateria",
        "format": "{{msg.payload.value ? \"Activo\" : \"Inactivo\"}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1070,
        "y": 1100,
        "wires": []
    },
    {
        "id": "4b8e02e49f0e573a",
        "type": "ui_text",
        "z": "66697df425b4ad85",
        "group": "95bc0ee9d93efab4",
        "order": 13,
        "width": "8",
        "height": "1",
        "name": "",
        "label": "Estado Ventilador",
        "format": "{{msg.payload.value ? \"Activo\" : \"Inactivo\"}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1060,
        "y": 860,
        "wires": []
    },
    {
        "id": "fa077081ed0d810d",
        "type": "ui_text",
        "z": "66697df425b4ad85",
        "group": "95bc0ee9d93efab4",
        "order": 13,
        "width": "8",
        "height": "1",
        "name": "",
        "label": "Estado Molino",
        "format": "{{msg.payload.value ? \"Activo\" : \"Inactivo\"}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1070,
        "y": 980,
        "wires": []
    },
    {
        "id": "a56ad40f3a32b894",
        "type": "ui_text",
        "z": "66697df425b4ad85",
        "group": "95bc0ee9d93efab4",
        "order": 13,
        "width": "8",
        "height": "1",
        "name": "",
        "label": "Estado Compuertas Agua",
        "format": "{{msg.payload.value ? \"Cerrada\" : \"Abierta\"}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1040,
        "y": 1460,
        "wires": []
    },
    {
        "id": "5b5d994f65a76f1a",
        "type": "ui_audio",
        "z": "66697df425b4ad85",
        "name": "",
        "group": "95bc0ee9d93efab4",
        "voice": "urn:moz-tts:speechd:Spanish%20(Spain)+Marcelo?es",
        "always": true,
        "x": 1520,
        "y": 1580,
        "wires": []
    },
    {
        "id": "9f1e79a2c5f11866",
        "type": "switch",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 1580,
        "wires": [
            [
                "9888c46d3c3821a5"
            ]
        ]
    },
    {
        "id": "9888c46d3c3821a5",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alerta, Alerta, se est√° produciendo un incendio. Repito, incendio. Evacuen inmediatamente.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1580,
        "wires": [
            [
                "5b5d994f65a76f1a"
            ]
        ]
    },
    {
        "id": "d34dfd85d22a1f93",
        "type": "comment",
        "z": "66697df425b4ad85",
        "name": "Alerta Alarma Incendio",
        "info": "",
        "x": 460,
        "y": 1540,
        "wires": []
    },
    {
        "id": "40cf62c2aa88afa4",
        "type": "http request",
        "z": "66697df425b4ad85",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://{{{orion_ip}}}:{{{orion_puerto}}}/v2/entities/{{{entity_id}}}/attrs/{{{attr}}}",
        "tls": "a5e11d29c103c79c",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Fiware-Service",
                "valueType": "msg",
                "valueValue": "fiware_service"
            },
            {
                "keyType": "other",
                "keyValue": "Fiware-ServicePath",
                "valueType": "msg",
                "valueValue": "fiware_servicepath"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "oauth2-token"
            }
        ],
        "x": 670,
        "y": 1580,
        "wires": [
            [
                "b3181ad2ba3cb2d5"
            ]
        ]
    },
    {
        "id": "b3181ad2ba3cb2d5",
        "type": "json",
        "z": "66697df425b4ad85",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 810,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "a33f8ad067826ff9",
        "type": "function",
        "z": "66697df425b4ad85",
        "name": "function 7",
        "func": "msg.payload = msg.payload.value != \"true\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 1580,
        "wires": [
            [
                "9f1e79a2c5f11866"
            ]
        ]
    },
    {
        "id": "736b6b2279e18321",
        "type": "ui_button",
        "z": "66697df425b4ad85",
        "name": "",
        "group": "95bc0ee9d93efab4",
        "order": 18,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Activar Alarma Incendio",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1210,
        "y": 1660,
        "wires": [
            [
                "9888c46d3c3821a5"
            ]
        ]
    },
    {
        "id": "2d0ec03bdb9eb469",
        "type": "debug",
        "z": "66697df425b4ad85",
        "name": "debug 11",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 950,
        "y": 440,
        "wires": []
    },
    {
        "id": "ad72db13a66233d8",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Calidad:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "quality",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 220,
        "wires": [
            [
                "4bb0d100f030ce4d"
            ]
        ]
    },
    {
        "id": "5690a14ee01e90fa",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:TBateria:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "temp",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 360,
        "wires": [
            [
                "52bf2d6754cc07e8"
            ]
        ]
    },
    {
        "id": "acb075e439e0a122",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Viento:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "speed",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 500,
        "wires": [
            [
                "693bf480b022193c"
            ]
        ]
    },
    {
        "id": "46a2c4d326741164",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:CalidadAgua:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "quality",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 620,
        "wires": [
            [
                "ce7f67daba977823"
            ]
        ]
    },
    {
        "id": "d3118caa1b9dc65b",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:CapacidadTanque:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "capacity",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 740,
        "wires": [
            [
                "94c01c2184b26716"
            ]
        ]
    },
    {
        "id": "a1cd6c519d1f4ceb",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Ventilador:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 860,
        "wires": [
            [
                "73291a0a943daf79"
            ]
        ]
    },
    {
        "id": "7de388dd69877261",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Molino:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 980,
        "wires": [
            [
                "7546cdd4c056ea85"
            ]
        ]
    },
    {
        "id": "244b64a358d2df93",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Bateria:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 1100,
        "wires": [
            [
                "9176cf462b268ceb"
            ]
        ]
    },
    {
        "id": "b8a1d1b6089f4b3c",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:EPuerta:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "locked",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 1220,
        "wires": [
            [
                "dfad28025814241a"
            ]
        ]
    },
    {
        "id": "b2681c5a6f090a7b",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:IPuerta:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "locked",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 1340,
        "wires": [
            [
                "b9726b56927dde5d"
            ]
        ]
    },
    {
        "id": "3e618ec3c0f1f49d",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:Compuertas:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "locked",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 1460,
        "wires": [
            [
                "64df86971052549b"
            ]
        ]
    },
    {
        "id": "aa59c4bdc685138b",
        "type": "change",
        "z": "66697df425b4ad85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "entity_id",
                "pt": "msg",
                "to": "urn:ngsi-ld:SIncendios:001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "alarm",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 1580,
        "wires": [
            [
                "40cf62c2aa88afa4"
            ]
        ]
    },
    {
        "id": "5e5474029a09d273",
        "type": "inject",
        "z": "66697df425b4ad85",
        "name": "execute request",
        "props": [
            {
                "p": "orion_ip",
                "v": "orion_ip",
                "vt": "flow"
            },
            {
                "p": "orion_puerto",
                "v": "orion_puerto",
                "vt": "flow"
            },
            {
                "p": "fiware_service",
                "v": "fiware_service",
                "vt": "flow"
            },
            {
                "p": "fiware_servicepath",
                "v": "fiware_servicepath",
                "vt": "flow"
            },
            {
                "p": "oauth2-token",
                "v": "oauth2-token",
                "vt": "global"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 220,
        "wires": [
            [
                "ad72db13a66233d8",
                "5690a14ee01e90fa",
                "acb075e439e0a122",
                "46a2c4d326741164",
                "d3118caa1b9dc65b",
                "a1cd6c519d1f4ceb",
                "7de388dd69877261",
                "244b64a358d2df93",
                "b8a1d1b6089f4b3c",
                "b2681c5a6f090a7b",
                "3e618ec3c0f1f49d",
                "aa59c4bdc685138b"
            ]
        ]
    }
]